{"ast":null,"code":"import _toConsumableArray from \"/Users/jaylenthomas/Downloads/modot_web/titanv2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/jaylenthomas/Downloads/modot_web/titanv2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/jaylenthomas/Downloads/modot_web/titanv2/src/views/pages/data-download/Probe.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\"; // reactstrap components\n\nimport { Card, CardHeader, Container, Table } from \"reactstrap\"; // import DateTimePicker from '@material-ui/lab/DateTimePicker';\n\nimport { // Card,\n// CardHeader,\n// CardContent,\nGrid, Button, Checkbox, FormControl, FormControlLabel, FormGroup, InputLabel, List, ListItem, ListItemText, ListItemSecondaryAction, NativeSelect, TextField, Select, MenuItem } from \"@material-ui/core\";\nimport moment from 'moment'; // import fire from '../../../fire'\n// import fire from '../../../configs/FirebaseConfig'\n\nimport { firebase } from '../../../auth/FirebaseAuth'; // import firebase from 'firebase/app';\n// import * as firebase from 'firebase/firebase';\n// import { auth, db } from 'auth/FirebaseAuth';\n// import DateFnsUtils from '@date-io/date-fns';\n// import {\n// \tMuiPickersUtilsProvider,\n// \tKeyboardTimePicker,\n// \tKeyboardDatePicker,\n// } from '@material-ui/pickers';\n// import ReactDatetime from \"react-datetime\";\n// core components\n\nimport SimpleHeader from \"components/Headers/SimpleHeader.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar dateArr = new Date().toISOString().split(':', 2);\nvar today = dateArr[0] + \":\" + dateArr[1];\nvar date = new Date();\ndate.setDate(date.getDate() - 7);\nvar last_weekArr = date.toISOString().split(':', 2);\nvar last_week = last_weekArr[0] + \":\" + last_weekArr[1]; // console.log(last_week)\n\nvar counties = ['ALL', 'ADAIR', 'ADAMS', 'ALEXANDER', 'ANDREW', 'ATCHISON', 'AUDRAIN', 'BARRY', 'BARTON', 'BATES', 'BENTON', 'BOLLINGER', 'BOONE', 'BUCHANAN', 'BUTLER', 'CALDWELL', 'CALLAWAY', 'CAMDEN', 'CAPE GIRARDEAU', 'CARROLL', 'CARTER', 'CASS', 'CEDAR', 'CHARITON', 'CHRISTIAN', 'CLARK', 'CLAY', 'CLINTON', 'COLE', 'COOPER', 'CRAWFORD', 'DADE', 'DALLAS', 'DAVIESS', 'DEKALB', 'DENT', 'DOUGLAS', 'DUNKLIN', 'FRANKLIN', 'FREMONT', 'GASCONADE', 'GENTRY', 'GREENE', 'GRUNDY', 'HARRISON', 'HENRY', 'HICKORY', 'HOLT', 'HOWARD', 'HOWELL', 'IRON', 'JACKSON', 'JASPER', 'JEFFERSON', 'JOHNSON', 'KNOX', 'LACLEDE', 'LAFAYETTE', 'LAWRENCE', 'LEWIS', 'LINCOLN', 'LINN', 'LIVINGSTON', 'MACON', 'MADISON', 'MARIES', 'MARION', 'MCDONALD', 'MERCER', 'MIAMI', 'MILLER', 'MISSISSIPPI', 'MONITEAU', 'MONROE', 'MONTGOMERY', 'MORGAN', 'NEW MADRID', 'NEWTON', 'NODAWAY', 'OREGON', 'OSAGE', 'OZARK', 'PEMISCOT', 'PERRY', 'PETTIS', 'PHELPS', 'PIKE', 'PLATTE', 'POLK', 'PULASKI', 'PUTNAM', 'RALLS', 'RANDOLPH', 'RAY', 'REYNOLDS', 'RIPLEY', 'SALINE', 'SCHUYLER', 'SCOTLAND', 'SCOTT', 'SHANNON', 'SHELBY', 'ST CHARLES', 'ST CLAIR', 'ST FRANCOIS', 'ST LOUIS', 'ST LOUIS (CITY)', 'ST. CHARLES', 'ST. CLAIR', 'ST. FRANCOIS', 'ST. LOUIS', 'ST. LOUIS (CITY)', 'ST. LOUIS CITY', 'STE GENEVIEVE', 'STE. GENEVIEVE', 'STODDARD', 'STONE', 'SULLIVAN', 'TANEY', 'TEXAS', 'VERNON', 'WARREN', 'WASHINGTON', 'WAYNE', 'WEBSTER', 'WORTH', 'WRIGHT', 'WYANDOTTE'];\n\nfunction Probe(props) {\n  _s();\n\n  var _this = this;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _React$useState = React.useState(last_week),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      startDate = _React$useState2[0],\n      setStartDate = _React$useState2[1];\n\n  var _React$useState3 = React.useState(today),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      endDate = _React$useState4[0],\n      setEndDate = _React$useState4[1];\n\n  var _useState3 = useState(1),\n      _useState4 = _slicedToArray(_useState3, 2),\n      travel = _useState4[0],\n      setTravel = _useState4[1];\n\n  var _useState5 = useState(1),\n      _useState6 = _slicedToArray(_useState5, 2),\n      speed = _useState6[0],\n      setSpeed = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      averageSpeed = _useState8[0],\n      setAverageSpeed = _useState8[1];\n\n  var _useState9 = useState(1),\n      _useState10 = _slicedToArray(_useState9, 2),\n      referenceSpeed = _useState10[0],\n      setReferenceSpeed = _useState10[1]; // const [county, setCounty] = useState(0);\n\n\n  var _useState11 = useState(['ALL']),\n      _useState12 = _slicedToArray(_useState11, 2),\n      countys = _useState12[0],\n      setCountys = _useState12[1];\n\n  var _useState13 = useState(1),\n      _useState14 = _slicedToArray(_useState13, 2),\n      tt_value = _useState14[0],\n      setTt_value = _useState14[1];\n\n  var _useState15 = useState(60),\n      _useState16 = _slicedToArray(_useState15, 2),\n      agg_interval = _useState16[0],\n      setAggInterval = _useState16[1];\n\n  var _useState17 = useState('Probe_'.concat(moment().unix())),\n      _useState18 = _slicedToArray(_useState17, 2),\n      fileName = _useState18[0],\n      setFileName = _useState18[1];\n\n  var _useState19 = useState([]),\n      _useState20 = _slicedToArray(_useState19, 2),\n      queryResults = _useState20[0],\n      setQueryResult = _useState20[1];\n\n  var _useState21 = useState(null),\n      _useState22 = _slicedToArray(_useState21, 2),\n      serverResponse = _useState22[0],\n      setServerResponse = _useState22[1];\n\n  var _useState23 = useState(0),\n      _useState24 = _slicedToArray(_useState23, 2),\n      timer = _useState24[0],\n      setTimer = _useState24[1];\n\n  useEffect(function () {\n    var timer = null;\n\n    if (loading) {\n      timer = setInterval(function () {\n        var obj = queryResults[queryResults.length - 1];\n        var diff = Math.round(Math.abs((new Date() - new Date(obj.querySubmitTime)) / 1000));\n        setTimer(diff);\n      }, 1000);\n    }\n\n    return function () {\n      if (queryResults.length) {\n        queryResults[queryResults.length - 1].status = 'completed';\n      }\n\n      clearInterval(timer);\n    };\n  }, [loading]);\n  useEffect(function () {\n    if (timer) {\n      queryResults[queryResults.length - 1].queryResponseTime = timer;\n    }\n  }, [timer]);\n  useEffect(function () {\n    if (serverResponse) {\n      queryResults[queryResults.length - 1].url = serverResponse.result;\n      queryResults[queryResults.length - 1].status = serverResponse.status;\n      setQueryResult(queryResults);\n    }\n  }, [serverResponse]);\n\n  var onSubmit = function onSubmit() {\n    if (!travel && !speed && !averageSpeed && !referenceSpeed) {\n      alert('Please select atleast one field');\n      return;\n    } // if (![travel, speed, averageSpeed, referenceSpeed].includes(true)) {\n    //   alert('Please select atleast one field');\n    //   return;\n    // }\n\n\n    if (fileName.trim().length === 0) {\n      alert('Please enter file name.');\n      return;\n    }\n\n    setLoading(true);\n    var results = [].concat(_toConsumableArray(queryResults), [{\n      status: 'progress',\n      querySubmitTime: new Date().toISOString(),\n      queryResponseTime: 0,\n      url: ''\n    }]);\n    setQueryResult(results);\n    var starttime = new Date();\n    fetch(\"http://127.0.0.1:8000/probe/StartDate/\".concat(startDate, \"/EndDate/\").concat(endDate, \"/Speed/\").concat(speed, \"/TravelTime/\").concat(travel, \"/AverageSpeed/\").concat(averageSpeed, \"/ReferenceSpeed/\").concat(referenceSpeed, \"/County/\").concat(countys, \"/AggInterval/\").concat(agg_interval, \"/TtValue/\").concat(tt_value, \"/FileName/\").concat(fileName)) //   `http://127.0.0.1:8000/api/extensions/get/Startdate/${startDate}:00/EndDate/${endDate}:00/TravelTime/${travel}/Speed/${speed}/AverageSpeed/${averageSpeed}/ReferenceSpeed/${referenceSpeed}/County/${county}/Filename/${fileName}`)\n    .then(function (res) {\n      return res.json();\n    }).then(function (response) {\n      // console.log('server response!!!!!!!!!!');\n      console.log(response);\n      console.log(Math.abs((new Date(response[2]) - starttime) / 1000));\n      console.log(Math.floor(Math.abs((new Date() - starttime) / 1000)).toString()); // setQueryResponse(Math.abs((new Date() - starttime) / 1000))\n\n      var rstval = Math.abs((new Date(response[2]) - starttime) / 1000).toString();\n      setLoading(false);\n      setServerResponse({\n        result: response[0],\n        status: 'completed',\n        filename: response[1]\n      }); // let messageRef = firebase.database().ref('messages')\n\n      var uuid = firebase.auth().currentUser.uid;\n      var unixTime = new Date().getTime().toString(); // let responseTime = Math.floor(query_respond).toString()\n      // console.log(Math.floor(query_respond).toString())\n      // let responseTime = results.queryResponseTime.toString()\n\n      var messageRef = firebase.firestore().collection('downloads'); // console.log(serverResponse)\n      // console.log(serverResponse.responseTime)\n\n      messageRef.doc('probe').collection(uuid).doc(unixTime).set({\n        'location': response[0],\n        'uid': uuid,\n        'filename': response[1],\n        'queryDate': unixTime,\n        'type': 'probe',\n        'queryResponse': rstval\n      });\n    }).catch(function (err) {\n      console.log('error!!!!!!!');\n      console.log(err);\n    });\n  };\n\n  var download = function download(url) {\n    window.open(url);\n  };\n\n  var handleChangeMultiple = function handleChangeMultiple(event) {\n    var options = event.target.options;\n    var value = [];\n\n    for (var i = 0, l = options.length; i < l; i += 1) {\n      if (options[i].selected) {\n        value.push(options[i].value);\n      }\n    }\n\n    setCountys(value); // console.log(countys)\n  };\n\n  var handleChangeAgg = function handleChangeAgg(event) {\n    setAggInterval(event.target.value);\n  };\n\n  var handleTtValue = function handleTtValue(event) {\n    setTt_value(event.target.value);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(SimpleHeader, {\n      name: \"Form elements\",\n      parentName: \"Forms\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      className: \"mt--6\",\n      fluid: true,\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"cus_container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"heading probe_clr\",\n          children: \"Query Probe Database\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"timing\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dates\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Start Date & Time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              id: \"datetime\",\n              type: \"datetime-local\",\n              defaultValue: startDate,\n              InputProps: {\n                disableUnderline: true\n              },\n              onChange: function onChange(e) {\n                setStartDate(e.target.value);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dates\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"End Date & Time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              id: \"datetime-local\",\n              type: \"datetime-local\",\n              defaultValue: endDate,\n              InputProps: {\n                disableUnderline: true\n              },\n              onChange: function onChange(e) {\n                setEndDate(e.target.value);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"checkboxes\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Data Attributes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n            className: \"checkbox-group\",\n            children: [/*#__PURE__*/_jsxDEV(FormControlLabel, {\n              control: /*#__PURE__*/_jsxDEV(Checkbox, {\n                checked: travel,\n                name: \"Travel Time\",\n                onChange: function onChange(e) {\n                  return setTravel(e.target.checked);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 10\n              }, this),\n              label: \"Travel Time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n              control: /*#__PURE__*/_jsxDEV(Checkbox, {\n                checked: speed,\n                name: \"Speed\",\n                onChange: function onChange(e) {\n                  return setSpeed(e.target.checked);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 10\n              }, this),\n              label: \"Speed\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n              control: /*#__PURE__*/_jsxDEV(Checkbox, {\n                name: \"Average Speed\",\n                onChange: function onChange(e) {\n                  return setAverageSpeed(e.target.checked);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 10\n              }, this),\n              label: \"Average Speed\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n              control: /*#__PURE__*/_jsxDEV(Checkbox, {\n                checked: referenceSpeed,\n                name: \"Reference Speed\",\n                onChange: function onChange(e) {\n                  return setReferenceSpeed(e.target.checked);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 10\n              }, this),\n              label: \"Reference Speed\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"travel-time\",\n          children: /*#__PURE__*/_jsxDEV(FormControl, {\n            children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n              shrink: true,\n              htmlFor: \"travel-time-id\",\n              children: \"Units for Travel Time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              labelId: \"demo-simple-select-label\",\n              id: \"demo-simple-select\",\n              value: tt_value,\n              onChange: handleTtValue,\n              children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                value: 1,\n                children: \"minutes\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 327,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                value: 60,\n                children: \"seconds\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"aggregation-interval\",\n          children: /*#__PURE__*/_jsxDEV(FormControl, {\n            children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n              shrink: true,\n              htmlFor: \"aggregation-interval\",\n              children: \"County\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              multiple: true,\n              native: true,\n              value: countys,\n              onChange: handleChangeMultiple,\n              inputProps: {\n                id: 'select-multiple-native'\n              },\n              children: counties.map(function (name) {\n                return /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: name,\n                  children: name\n                }, name, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 348,\n                  columnNumber: 10\n                }, _this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"aggregation-interval\",\n          children: /*#__PURE__*/_jsxDEV(FormControl, {\n            children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n              shrink: true,\n              htmlFor: \"aggregation-interval\",\n              children: \"Aggregation Interval\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              labelId: \"demo-simple-select-label\",\n              id: \"demo-simple-select\",\n              value: agg_interval,\n              onChange: handleChangeAgg,\n              children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                value: 60,\n                children: \"60 minutes\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 367,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                value: 30,\n                children: \"30 minutes\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 368,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                value: 15,\n                children: \"15 minutes\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 369,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                value: 5,\n                children: \"5 minutes\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 370,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"file-name\",\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            id: \"file-name\",\n            label: \"File Name\",\n            type: \"text\",\n            defaultValue: fileName,\n            InputLabelProps: {\n              shrink: true\n            },\n            onChange: function onChange(e) {\n              return setFileName(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"button\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            className: \"probe_clr\",\n            variant: \"contained\" // disabled={loading}\n            ,\n            disbled: false,\n            onClick: onSubmit,\n            children: \"SUBMIT QUERY\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      className: \"mt--10\",\n      fluid: true,\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n          className: \"border-0\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"mb-0\",\n            children: \"Query Results\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 19\n        }, this), /*#__PURE__*/_jsxDEV(Table, {\n          className: \"align-items-center table-flush\",\n          responsive: true,\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"thead-light\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                style: {\n                  backgroundColor: '#172b4d',\n                  color: '#fff'\n                },\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 410,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                style: {\n                  backgroundColor: '#172b4d',\n                  color: '#fff'\n                },\n                children: \"Downloads and Reports\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 413,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                style: {\n                  backgroundColor: '#172b4d',\n                  color: '#fff'\n                },\n                children: \"Query Date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 416,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 23\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            className: \"list\",\n            children: queryResults.length ? queryResults.map(function (result, index) {\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"button\",\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      className: \"probe_clr\",\n                      variant: \"contained\",\n                      disabled: result.status === 'progress' ? true : false,\n                      onClick: function onClick() {\n                        return download(result.url);\n                      },\n                      children: result.status === 'progress' ? 'Downloading' : 'Download Ready'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 427,\n                      columnNumber: 11\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 426,\n                    columnNumber: 10\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 425,\n                  columnNumber: 9\n                }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"budget\",\n                  children: [\"Query returned in \", result.queryResponseTime, \" seconds\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 440,\n                  columnNumber: 9\n                }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: moment(result.querySubmitTime).format('MMM DD, YYYY hh:mm A')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 443,\n                  columnNumber: 9\n                }, _this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 424,\n                columnNumber: 16\n              }, _this);\n            }) : /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: /*#__PURE__*/_jsxDEV(\"td\", {\n                colSpan: \"3\",\n                style: {\n                  textAlign: 'center',\n                  fontSize: 20\n                },\n                children: \"Data not found.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 453,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 452,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Probe, \"XURIdmPokUrmiXHyYGJukKika/w=\");\n\n_c = Probe;\nexport default Probe;\n\nvar _c;\n\n$RefreshReg$(_c, \"Probe\");","map":{"version":3,"sources":["/Users/jaylenthomas/Downloads/modot_web/titanv2/src/views/pages/data-download/Probe.js"],"names":["React","useState","useEffect","Card","CardHeader","Container","Table","Grid","Button","Checkbox","FormControl","FormControlLabel","FormGroup","InputLabel","List","ListItem","ListItemText","ListItemSecondaryAction","NativeSelect","TextField","Select","MenuItem","moment","firebase","SimpleHeader","dateArr","Date","toISOString","split","today","date","setDate","getDate","last_weekArr","last_week","counties","Probe","props","loading","setLoading","startDate","setStartDate","endDate","setEndDate","travel","setTravel","speed","setSpeed","averageSpeed","setAverageSpeed","referenceSpeed","setReferenceSpeed","countys","setCountys","tt_value","setTt_value","agg_interval","setAggInterval","concat","unix","fileName","setFileName","queryResults","setQueryResult","serverResponse","setServerResponse","timer","setTimer","setInterval","obj","length","diff","Math","round","abs","querySubmitTime","status","clearInterval","queryResponseTime","url","result","onSubmit","alert","trim","results","starttime","fetch","then","res","json","response","console","log","floor","toString","rstval","filename","uuid","auth","currentUser","uid","unixTime","getTime","messageRef","firestore","collection","doc","set","catch","err","download","window","open","handleChangeMultiple","event","options","target","value","i","l","selected","push","handleChangeAgg","handleTtValue","disableUnderline","e","checked","id","map","name","shrink","backgroundColor","color","index","format","textAlign","fontSize"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\";\n// reactstrap components\nimport {\n  Card,\n  CardHeader,\n  Container,\n  Table\n} from \"reactstrap\";\n\n// import DateTimePicker from '@material-ui/lab/DateTimePicker';\n\nimport {\n\t// Card,\n\t// CardHeader,\n\t// CardContent,\n\tGrid,\n\tButton,\n\tCheckbox,\n\tFormControl,\n\tFormControlLabel,\n\tFormGroup,\n\tInputLabel,\n\tList,\n\tListItem,\n\tListItemText,\n\tListItemSecondaryAction,\n\tNativeSelect,\n\tTextField,\n\tSelect,\n\tMenuItem\n} from \"@material-ui/core\";\nimport moment from 'moment';  \n// import fire from '../../../fire'\n// import fire from '../../../configs/FirebaseConfig'\nimport {firebase} from '../../../auth/FirebaseAuth'\n// import firebase from 'firebase/app';\n// import * as firebase from 'firebase/firebase';\n\n\n// import { auth, db } from 'auth/FirebaseAuth';\n\n\n\n// import DateFnsUtils from '@date-io/date-fns';\n\n// import {\n// \tMuiPickersUtilsProvider,\n// \tKeyboardTimePicker,\n// \tKeyboardDatePicker,\n// } from '@material-ui/pickers';\n\n// import ReactDatetime from \"react-datetime\";\n// core components\nimport SimpleHeader from \"components/Headers/SimpleHeader.js\";\n\nconst dateArr = new Date().toISOString().split(':', 2);\nconst today = dateArr[0] + \":\" + dateArr[1];\n\nvar date = new Date();\ndate.setDate(date.getDate() - 7);\nconst last_weekArr = date.toISOString().split(':', 2);\nconst last_week = last_weekArr[0] + \":\" + last_weekArr[1];\n// console.log(last_week)\n\nvar counties = ['ALL','ADAIR', 'ADAMS', 'ALEXANDER', 'ANDREW', 'ATCHISON', 'AUDRAIN',\n'BARRY', 'BARTON', 'BATES', 'BENTON', 'BOLLINGER', 'BOONE',\n'BUCHANAN', 'BUTLER', 'CALDWELL', 'CALLAWAY', 'CAMDEN',\n'CAPE GIRARDEAU', 'CARROLL', 'CARTER', 'CASS', 'CEDAR', 'CHARITON',\n'CHRISTIAN', 'CLARK', 'CLAY', 'CLINTON', 'COLE', 'COOPER',\n'CRAWFORD', 'DADE', 'DALLAS', 'DAVIESS', 'DEKALB', 'DENT',\n'DOUGLAS', 'DUNKLIN', 'FRANKLIN', 'FREMONT', 'GASCONADE', 'GENTRY',\n'GREENE', 'GRUNDY', 'HARRISON', 'HENRY', 'HICKORY', 'HOLT',\n'HOWARD', 'HOWELL', 'IRON', 'JACKSON', 'JASPER', 'JEFFERSON',\n'JOHNSON', 'KNOX', 'LACLEDE', 'LAFAYETTE', 'LAWRENCE', 'LEWIS',\n'LINCOLN', 'LINN', 'LIVINGSTON', 'MACON', 'MADISON', 'MARIES',\n'MARION', 'MCDONALD', 'MERCER', 'MIAMI', 'MILLER', 'MISSISSIPPI',\n'MONITEAU', 'MONROE', 'MONTGOMERY', 'MORGAN', 'NEW MADRID',\n'NEWTON', 'NODAWAY', 'OREGON', 'OSAGE', 'OZARK', 'PEMISCOT',\n'PERRY', 'PETTIS', 'PHELPS', 'PIKE', 'PLATTE', 'POLK', 'PULASKI',\n'PUTNAM', 'RALLS', 'RANDOLPH', 'RAY', 'REYNOLDS', 'RIPLEY',\n'SALINE', 'SCHUYLER', 'SCOTLAND', 'SCOTT', 'SHANNON', 'SHELBY',\n'ST CHARLES', 'ST CLAIR', 'ST FRANCOIS', 'ST LOUIS',\n'ST LOUIS (CITY)', 'ST. CHARLES', 'ST. CLAIR', 'ST. FRANCOIS',\n'ST. LOUIS', 'ST. LOUIS (CITY)', 'ST. LOUIS CITY', 'STE GENEVIEVE',\n'STE. GENEVIEVE', 'STODDARD', 'STONE', 'SULLIVAN', 'TANEY',\n'TEXAS', 'VERNON', 'WARREN', 'WASHINGTON', 'WAYNE', 'WEBSTER',\n'WORTH', 'WRIGHT', 'WYANDOTTE']\n\n\n\n\nfunction Probe(props) {\n\tconst [loading, setLoading] = useState(false);\n\tconst [startDate, setStartDate] = React.useState(last_week);\n\tconst [endDate, setEndDate] = React.useState(today);\n\tconst [travel, setTravel] = useState(1);\n\tconst [speed, setSpeed] = useState(1);\n\tconst [averageSpeed, setAverageSpeed] = useState(0);\n\tconst [referenceSpeed, setReferenceSpeed] = useState(1);\n\t// const [county, setCounty] = useState(0);\n\tconst [countys, setCountys] = useState(['ALL']);\n\tconst [tt_value,setTt_value] = useState(1)\n\tconst [agg_interval, setAggInterval] = useState(60);\n\tconst [fileName, setFileName] = useState('Probe_'.concat(moment().unix()));\n\tconst [queryResults, setQueryResult] = useState([]);\n\tconst [serverResponse, setServerResponse] = useState(null);\n\tconst [timer, setTimer] = useState(0);\n\n\tuseEffect(() => {\n\t\tlet timer = null;\n\t\tif (loading) {\n\t\t\ttimer = setInterval(() => {\n\t\t\t\tvar obj = queryResults[queryResults.length - 1];\n\t\t\t\tconst diff = Math.round(\n\t\t\t\t\tMath.abs((new Date() - new Date(obj.querySubmitTime)) / 1000));\n\t\t\t\tsetTimer(diff);\n\t\t\t}, 1000);\n\t\t}\n\t\treturn () => {\n\t\t\tif (queryResults.length) {\n\t\t\t\tqueryResults[queryResults.length - 1].status = 'completed';\n\t\t\t}\n\t\t\tclearInterval(timer);\n\t\t};\n\t},[loading]);\n\n\tuseEffect(() => {\n\t\tif (timer) {\n\t\t\tqueryResults[queryResults.length - 1].queryResponseTime = timer;\n\t\t}\n\t}, [timer]);\n\n\tuseEffect(() => {\n\t\tif (serverResponse) {\n\t\t\tqueryResults[queryResults.length - 1].url = serverResponse.result;\n\t\t\tqueryResults[queryResults.length - 1].status = serverResponse.status;\n\t\t\tsetQueryResult(queryResults);\n\t\t}\n\t}, [serverResponse]);\n\n\tconst onSubmit = () => {\n\t\tif ((!travel) && (!speed)&& (!averageSpeed)&& (!referenceSpeed)){\n\t\t\talert('Please select atleast one field');\n\t\t\treturn;\n\t\t}\n\n\t\t// if (![travel, speed, averageSpeed, referenceSpeed].includes(true)) {\n\t\t//   alert('Please select atleast one field');\n\t\t//   return;\n\t\t// }\n\t\tif (fileName.trim().length === 0) {\n\t\t  alert('Please enter file name.');\n\t\t  return;\n\t\t}\n\t\t\n\t\tsetLoading(true);\n\t\tvar results = [...queryResults, {\n\t\t\tstatus: 'progress',\n\t\t\tquerySubmitTime: new Date().toISOString(),\n\t\t\tqueryResponseTime: 0,\n\t\t\turl: '',\n\t\t}];\n\t\tsetQueryResult(results);\n\t\tlet starttime = new Date()\n\t\tfetch(\n\t\t\t`http://127.0.0.1:8000/probe/StartDate/${startDate}/EndDate/${endDate}/Speed/${speed}/TravelTime/${travel}/AverageSpeed/${averageSpeed}/ReferenceSpeed/${referenceSpeed}/County/${countys}/AggInterval/${agg_interval}/TtValue/${tt_value}/FileName/${fileName}`)\n\t\t//   `http://127.0.0.1:8000/api/extensions/get/Startdate/${startDate}:00/EndDate/${endDate}:00/TravelTime/${travel}/Speed/${speed}/AverageSpeed/${averageSpeed}/ReferenceSpeed/${referenceSpeed}/County/${county}/Filename/${fileName}`)\n\t\t.then(res => {\n\t\t  return res.json();\n\t\t}).then(response => {\n\t\t\t// console.log('server response!!!!!!!!!!');\n\t\t\tconsole.log(response);\n\t\t\tconsole.log(Math.abs((new Date(response[2]) - starttime) / 1000));\n\t\t\tconsole.log(Math.floor(Math.abs((new Date() - starttime) / 1000)).toString())\n\t\t\t// setQueryResponse(Math.abs((new Date() - starttime) / 1000))\n\t\t\tvar rstval = Math.abs((new Date(response[2]) - starttime) / 1000).toString()\n\t\t\t\n\n\t\t    setLoading(false);\n\t\t\tsetServerResponse({\n\t\t\t\tresult: response[0],\n\t\t\t\tstatus: 'completed',\n\t\t\t\tfilename:response[1],\n\t\t\t});\n\n\t\t\t// let messageRef = firebase.database().ref('messages')\n\t\t\tlet uuid = firebase.auth().currentUser.uid\n\t\t\tlet unixTime = new Date().getTime().toString()\n\t\t\t// let responseTime = Math.floor(query_respond).toString()\n\t\t\t// console.log(Math.floor(query_respond).toString())\n\t\t\t// let responseTime = results.queryResponseTime.toString()\n\t\t\t\n\t\t\tconst messageRef = firebase.firestore().collection('downloads')\n\t\t\t// console.log(serverResponse)\n\t\t\t// console.log(serverResponse.responseTime)\n\n\t\t\tmessageRef.doc('probe').collection(uuid).doc(unixTime).set({'location':response[0], \n\t\t\t'uid':uuid,'filename':response[1], 'queryDate':unixTime,'type':'probe',\n\t\t\t'queryResponse':rstval})\n\t\t\n\t\t })\n\t\t .catch(err => {\n\t\t\tconsole.log('error!!!!!!!');\n\t\t\tconsole.log(err);\n\t\t});\n\t}\n\n\tconst download = url => {\n\t\twindow.open(url);\n\t}\n\n\tconst handleChangeMultiple = (event) => {\n\t\tconst { options } = event.target;\n\t\tconst value = [];\n\t\tfor (let i = 0, l = options.length; i < l; i += 1) {\n\t\t  if (options[i].selected) {\n\t\t\tvalue.push(options[i].value);\n\t\t  }\n\t\t}\n\t\tsetCountys(value);\n\t\t// console.log(countys)\n\t};\n\n\tconst handleChangeAgg = (event) => {\n\t\tsetAggInterval(event.target.value);\n\t  };\n\tconst handleTtValue = (event) => {\n\t\tsetTt_value(event.target.value);\n\t};\n\t  \n\n\n\treturn (\n\t\t\n\t\t<>\n\t\t\n\t\t\t<SimpleHeader name=\"Form elements\" parentName=\"Forms\" />\n\n\t\t\t<Container className=\"mt--6\" fluid>\n\t\t\t\t<form className=\"cus_container\">\n\t\t\t\t\t<div className=\"heading probe_clr\">\n\t\t\t\t\t\tQuery Probe Database\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"timing\">\n\t\t\t\t\t\t<div className=\"dates\">\n\t\t\t\t\t\t\t<span>Start Date &amp; Time</span>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tid=\"datetime\"\n\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n\t\t\t\t\t\t\t\tdefaultValue={startDate}\n\t\t\t\t\t\t\t\tInputProps={{ disableUnderline: true }}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetStartDate(e.target.value);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"dates\">\n\t\t\t\t\t\t\t<span>End Date &amp; Time</span>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tid=\"datetime-local\"\n\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n\t\t\t\t\t\t\t\tdefaultValue={endDate}\n\t\t\t\t\t\t\t\tInputProps={{ disableUnderline: true }}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetEndDate(e.target.value);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"checkboxes\">\n\t\t\t\t\t\t<p>Data Attributes</p>\n\t\t\t\t\t\t<FormGroup className=\"checkbox-group\">\n\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\t\t\tchecked={travel}\n\t\t\t\t\t\t\t\t\t\tname=\"Travel Time\"\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setTravel(e.target.checked)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlabel=\"Travel Time\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\t\t\tchecked={speed}\n\t\t\t\t\t\t\t\t\t\tname=\"Speed\"\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setSpeed(e.target.checked)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlabel=\"Speed\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\t\t\tname=\"Average Speed\"\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setAverageSpeed(e.target.checked)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlabel=\"Average Speed\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\t\t\tchecked={referenceSpeed}\n\t\t\t\t\t\t\t\t\t\tname=\"Reference Speed\"\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setReferenceSpeed(e.target.checked)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlabel=\"Reference Speed\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"travel-time\">\n\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t<InputLabel shrink htmlFor=\"travel-time-id\">\n\t\t\t\t\t\t\t\tUnits for Travel Time\n\t\t\t\t\t\t\t</InputLabel>\n\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\tlabelId=\"demo-simple-select-label\"\n\t\t\t\t\t\t\t\tid=\"demo-simple-select\"\n\t\t\t\t\t\t\t\tvalue={tt_value}\n\t\t\t\t\t\t\t\tonChange={handleTtValue}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<MenuItem value={1}>minutes</MenuItem>\n\t\t\t\t\t\t\t\t<MenuItem value={60}>seconds</MenuItem>\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"aggregation-interval\">\n\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t<InputLabel shrink htmlFor=\"aggregation-interval\">\n\t\t\t\t\t\t\t\tCounty\n\t\t\t\t\t\t\t</InputLabel>\n\t\t\t\t\t\t\t<Select \n\t\t\t\t\t\t\t\tmultiple\n\t\t\t\t\t\t\t\tnative\n\t\t\t\t\t\t\t\tvalue={countys}\n\t\t\t\t\t\t\t\tonChange={handleChangeMultiple}\n\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\t\tid: 'select-multiple-native',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{counties.map((name) =>(\n\t\t\t\t\t\t\t\t\t<option key={name} value={name}>\n\t\t\t\t\t\t\t\t\t\t{name}\n\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"aggregation-interval\">\n\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t<InputLabel shrink htmlFor=\"aggregation-interval\">\n\t\t\t\t\t\t\t\tAggregation Interval\n\t\t\t\t\t\t\t</InputLabel>\n\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\tlabelId=\"demo-simple-select-label\"\n\t\t\t\t\t\t\t\tid=\"demo-simple-select\"\n\t\t\t\t\t\t\t\tvalue={agg_interval}\n\t\t\t\t\t\t\t\tonChange={handleChangeAgg}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<MenuItem value={60}>60 minutes</MenuItem>\n\t\t\t\t\t\t\t\t<MenuItem value={30}>30 minutes</MenuItem>\n\t\t\t\t\t\t\t\t<MenuItem value={15}>15 minutes</MenuItem>\n\t\t\t\t\t\t\t\t<MenuItem value={5}>5 minutes</MenuItem>\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"file-name\">\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tid=\"file-name\"\n\t\t\t\t\t\t\tlabel=\"File Name\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tdefaultValue={fileName}\n\t\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\t\tshrink: true,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonChange={(e) => setFileName(e.target.value)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"button\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tclassName=\"probe_clr\"\n\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t// disabled={loading}\n\t\t\t\t\t\t\tdisbled={false}\n\t\t\t\t\t\t\tonClick={onSubmit}>\n\t\t\t  \t\t\t\tSUBMIT QUERY\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</Container>\n\n\t\t\t<Container className=\"mt--10\" fluid>\n\n                <Card>\n                  <CardHeader className=\"border-0\">\n                    <h3 className=\"mb-0\">Query Results</h3>\n                  </CardHeader>\n                  <Table className=\"align-items-center table-flush\" responsive>\n                    <thead className=\"thead-light\">\n                      <tr>\n                        <th scope=\"col\" style={{backgroundColor: '#172b4d', color: '#fff'}}>\n                          Status\n                        </th>\n                        <th scope=\"col\" style={{backgroundColor: '#172b4d', color: '#fff'}}>\n                          Downloads and Reports\n                        </th>\n                        <th scope=\"col\" style={{backgroundColor: '#172b4d', color: '#fff'}}>\n                          Query Date\n                        </th>\n                      </tr>\n                    </thead>\n                    <tbody className=\"list\">\n\t\t\t\t\t\t{queryResults.length ? (\n\t\t\t\t\t\t\tqueryResults.map((result, index) => {\n\t\t\t\t\t\t\t\treturn <tr key={index}>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<div className=\"button\">\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"probe_clr\"\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t\tresult.status === 'progress' ? true : false\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => download(result.url)}>\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tresult.status === 'progress' ? 'Downloading' : 'Download Ready'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td className=\"budget\">\n\t\t\t\t\t\t\t\t\tQuery returned in {result.queryResponseTime} seconds\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t{ \n\t\t\t\t\t\t\t\t\t\tmoment(result.querySubmitTime).format(\n\t\t\t\t\t\t\t\t\t\t\t'MMM DD, YYYY hh:mm A')\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td colSpan=\"3\" style={{textAlign: 'center', fontSize: 20}}>\n\t\t\t\t\t\t\t\t\tData not found.\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t)}\n                    </tbody>\n                  </Table>\n                </Card>\n\t\t\t</Container>\n\t\t</>\n\t);\n}\n\nexport default Probe;\n"]},"metadata":{},"sourceType":"module"}