{"ast":null,"code":"import _regeneratorRuntime from \"/Users/jaylenthomas/Downloads/modot_web/titanv2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(signInWithFBEmail),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime.mark(signOut),\n    _marked3 = /*#__PURE__*/_regeneratorRuntime.mark(signUpWithFBEmail),\n    _marked4 = /*#__PURE__*/_regeneratorRuntime.mark(setUserInfo),\n    _marked5 = /*#__PURE__*/_regeneratorRuntime.mark(rootSaga);\n\nimport { all, takeEvery, put, fork, call } from 'redux-saga/effects';\nimport { AUTH_TOKEN, SIGNIN, SIGNOUT, SIGNUP, SET_USER } from '../constants/Auth';\nimport { showAuthMessage, authenticated, signOutSuccess, signUpSuccess, showLoading, setUserSuccess } from \"../actions/Auth\";\nimport FirebaseService from 'services/FirebaseService';\nexport function signInWithFBEmail() {\n  return _regeneratorRuntime.wrap(function signInWithFBEmail$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return takeEvery(SIGNIN, /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n            var payload, email, password, user;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    payload = _ref.payload;\n                    email = payload.email, password = payload.password;\n                    _context.next = 4;\n                    return put(showLoading());\n\n                  case 4:\n                    _context.prev = 4;\n                    _context.next = 7;\n                    return call(FirebaseService.signInEmailRequest, email, password);\n\n                  case 7:\n                    user = _context.sent;\n\n                    if (!user.message) {\n                      _context.next = 13;\n                      break;\n                    }\n\n                    _context.next = 11;\n                    return put(showAuthMessage(user.message));\n\n                  case 11:\n                    _context.next = 16;\n                    break;\n\n                  case 13:\n                    localStorage.setItem(AUTH_TOKEN, user.idToken);\n                    _context.next = 16;\n                    return put(authenticated(user.idToken));\n\n                  case 16:\n                    _context.next = 22;\n                    break;\n\n                  case 18:\n                    _context.prev = 18;\n                    _context.t0 = _context[\"catch\"](4);\n                    _context.next = 22;\n                    return put(showAuthMessage(_context.t0));\n\n                  case 22:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee, null, [[4, 18]]);\n          }));\n\n        case 2:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked);\n}\nexport function signOut() {\n  return _regeneratorRuntime.wrap(function signOut$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.next = 2;\n          return takeEvery(SIGNOUT, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n            var signOutUser;\n            return _regeneratorRuntime.wrap(function _callee2$(_context3) {\n              while (1) {\n                switch (_context3.prev = _context3.next) {\n                  case 0:\n                    _context3.prev = 0;\n                    _context3.next = 3;\n                    return call(FirebaseService.signOutRequest);\n\n                  case 3:\n                    signOutUser = _context3.sent;\n\n                    if (!(signOutUser === undefined)) {\n                      _context3.next = 10;\n                      break;\n                    }\n\n                    localStorage.removeItem(AUTH_TOKEN);\n                    _context3.next = 8;\n                    return put(signOutSuccess(signOutUser));\n\n                  case 8:\n                    _context3.next = 12;\n                    break;\n\n                  case 10:\n                    _context3.next = 12;\n                    return put(showAuthMessage(signOutUser.message));\n\n                  case 12:\n                    _context3.next = 18;\n                    break;\n\n                  case 14:\n                    _context3.prev = 14;\n                    _context3.t0 = _context3[\"catch\"](0);\n                    _context3.next = 18;\n                    return put(showAuthMessage(_context3.t0));\n\n                  case 18:\n                  case \"end\":\n                    return _context3.stop();\n                }\n              }\n            }, _callee2, null, [[0, 14]]);\n          }));\n\n        case 2:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked2);\n}\nexport function signUpWithFBEmail() {\n  return _regeneratorRuntime.wrap(function signUpWithFBEmail$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.next = 2;\n          return takeEvery(SIGNUP, /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_ref2) {\n            var payload, name, email, password, user;\n            return _regeneratorRuntime.wrap(function _callee3$(_context5) {\n              while (1) {\n                switch (_context5.prev = _context5.next) {\n                  case 0:\n                    payload = _ref2.payload;\n                    name = payload.name, email = payload.email, password = payload.password;\n                    _context5.prev = 2;\n                    _context5.next = 5;\n                    return put(showLoading());\n\n                  case 5:\n                    _context5.next = 7;\n                    return call(FirebaseService.signUpEmailRequest, name, email, password);\n\n                  case 7:\n                    user = _context5.sent;\n\n                    if (!user.message) {\n                      _context5.next = 13;\n                      break;\n                    }\n\n                    _context5.next = 11;\n                    return put(showAuthMessage(user.message));\n\n                  case 11:\n                    _context5.next = 16;\n                    break;\n\n                  case 13:\n                    localStorage.setItem(AUTH_TOKEN, user.idToken);\n                    _context5.next = 16;\n                    return put(signUpSuccess(user.idToken));\n\n                  case 16:\n                    _context5.next = 22;\n                    break;\n\n                  case 18:\n                    _context5.prev = 18;\n                    _context5.t0 = _context5[\"catch\"](2);\n                    _context5.next = 22;\n                    return put(showAuthMessage(_context5.t0));\n\n                  case 22:\n                  case \"end\":\n                    return _context5.stop();\n                }\n              }\n            }, _callee3, null, [[2, 18]]);\n          }));\n\n        case 2:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, _marked3);\n}\nexport function setUserInfo() {\n  return _regeneratorRuntime.wrap(function setUserInfo$(_context8) {\n    while (1) {\n      switch (_context8.prev = _context8.next) {\n        case 0:\n          _context8.next = 2;\n          return takeEvery(SET_USER, /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(_ref3) {\n            var payload, uid, user;\n            return _regeneratorRuntime.wrap(function _callee4$(_context7) {\n              while (1) {\n                switch (_context7.prev = _context7.next) {\n                  case 0:\n                    payload = _ref3.payload;\n                    uid = payload.uid;\n                    _context7.next = 4;\n                    return put(showLoading());\n\n                  case 4:\n                    _context7.prev = 4;\n                    _context7.next = 7;\n                    return call(FirebaseService.fetchUserInfo, uid);\n\n                  case 7:\n                    user = _context7.sent;\n                    console.log(\"uid-user>\", user);\n\n                    if (!user.message) {\n                      _context7.next = 14;\n                      break;\n                    }\n\n                    _context7.next = 12;\n                    return put(showAuthMessage(user.message));\n\n                  case 12:\n                    _context7.next = 16;\n                    break;\n\n                  case 14:\n                    _context7.next = 16;\n                    return put(setUserSuccess(user));\n\n                  case 16:\n                    _context7.next = 22;\n                    break;\n\n                  case 18:\n                    _context7.prev = 18;\n                    _context7.t0 = _context7[\"catch\"](4);\n                    _context7.next = 22;\n                    return put(showAuthMessage(_context7.t0));\n\n                  case 22:\n                  case \"end\":\n                    return _context7.stop();\n                }\n              }\n            }, _callee4, null, [[4, 18]]);\n          }));\n\n        case 2:\n        case \"end\":\n          return _context8.stop();\n      }\n    }\n  }, _marked4);\n}\nexport default function rootSaga() {\n  return _regeneratorRuntime.wrap(function rootSaga$(_context9) {\n    while (1) {\n      switch (_context9.prev = _context9.next) {\n        case 0:\n          _context9.next = 2;\n          return all([fork(signInWithFBEmail), fork(signOut), fork(signUpWithFBEmail), fork(setUserInfo)]);\n\n        case 2:\n        case \"end\":\n          return _context9.stop();\n      }\n    }\n  }, _marked5);\n}","map":{"version":3,"sources":["/Users/jaylenthomas/Downloads/modot_web/titanv2/src/redux/sagas/Auth.js"],"names":["signInWithFBEmail","signOut","signUpWithFBEmail","setUserInfo","rootSaga","all","takeEvery","put","fork","call","AUTH_TOKEN","SIGNIN","SIGNOUT","SIGNUP","SET_USER","showAuthMessage","authenticated","signOutSuccess","signUpSuccess","showLoading","setUserSuccess","FirebaseService","payload","email","password","signInEmailRequest","user","message","localStorage","setItem","idToken","signOutRequest","signOutUser","undefined","removeItem","name","signUpEmailRequest","uid","fetchUserInfo","console","log"],"mappings":"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","sourcesContent":["import { all, takeEvery, put, fork, call } from 'redux-saga/effects';\nimport {\n\tAUTH_TOKEN,\n\tSIGNIN,\n\tSIGNOUT,\n\tSIGNUP,\n\tSET_USER,\n} from '../constants/Auth';\nimport {\n\tshowAuthMessage,\n\tauthenticated,\n\tsignOutSuccess,\n\tsignUpSuccess,\n\tshowLoading,\n\tsetUserSuccess\n} from \"../actions/Auth\";\n\nimport FirebaseService from 'services/FirebaseService'\n\nexport function* signInWithFBEmail() {\n\tyield takeEvery(SIGNIN, function* ({ payload }) {\n\t\tconst { email, password } = payload;\n\t\tyield put(showLoading());\n\t\ttry {\n\t\t\tconst user = yield call(FirebaseService.signInEmailRequest, email, password);\n\t\t\tif (user.message) {\n\t\t\t\tyield put(showAuthMessage(user.message));\n\t\t\t} else {\n\t\t\t\tlocalStorage.setItem(AUTH_TOKEN, user.idToken);\n\t\t\t\tyield put(authenticated(user.idToken));\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tyield put(showAuthMessage(err));\n\t\t}\n\t});\n}\n\nexport function* signOut() {\n\tyield takeEvery(SIGNOUT, function* () {\n\t\ttry {\n\t\t\tconst signOutUser = yield call(FirebaseService.signOutRequest);\n\t\t\tif (signOutUser === undefined) {\n\t\t\t\tlocalStorage.removeItem(AUTH_TOKEN);\n\t\t\t\tyield put(signOutSuccess(signOutUser));\n\t\t\t} else {\n\t\t\t\tyield put(showAuthMessage(signOutUser.message));\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tyield put(showAuthMessage(err));\n\t\t}\n\t});\n}\n\nexport function* signUpWithFBEmail() {\n\tyield takeEvery(SIGNUP, function* ({ payload }) {\n\t\tconst { name, email, password } = payload;\n\t\ttry {\n\t\t\tyield put(showLoading());\n\t\t\tconst user = yield call(FirebaseService.signUpEmailRequest, name, email, password);\n\t\t\tif (user.message) {\n\t\t\t\tyield put(showAuthMessage(user.message));\n\t\t\t} else {\n\t\t\t\tlocalStorage.setItem(AUTH_TOKEN, user.idToken);\n\t\t\t\tyield put(signUpSuccess(user.idToken));\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tyield put(showAuthMessage(error));\n\t\t}\n\t}\n\t);\n}\n\nexport function* setUserInfo() {\n\tyield takeEvery(SET_USER, function* ({ payload }) {\n\t\tconst { uid } = payload;\n\t\tyield put(showLoading());\n\t\ttry {\n\t\t\tconst user = yield call(FirebaseService.fetchUserInfo, uid);\n\t\t\tconsole.log(\"uid-user>\", user)\n\n\t\t\tif (user.message) {\n\t\t\t\tyield put(showAuthMessage(user.message));\n\t\t\t} else {\n\t\t\t\tyield put(setUserSuccess(user));\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tyield put(showAuthMessage(err));\n\t\t}\n\t});\n}\n\nexport default function* rootSaga() {\n\tyield all([\n\t\tfork(signInWithFBEmail),\n\t\tfork(signOut),\n\t\tfork(signUpWithFBEmail),\n\t\tfork(setUserInfo)\n\t]);\n}\n"]},"metadata":{},"sourceType":"module"}