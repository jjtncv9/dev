{"ast":null,"code":"import _toConsumableArray from \"/Users/jaylenthomas/Downloads/modot_web/titanv2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/jaylenthomas/Downloads/modot_web/titanv2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/jaylenthomas/Downloads/modot_web/titanv2/src/views/pages/data-download/Incidents.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\"; // reactstrap components\n\nimport { Card, CardHeader, Container, Table } from \"reactstrap\"; // import DateTimePicker from '@material-ui/lab/DateTimePicker';\n\nimport { Button, Checkbox, FormControlLabel, FormControl, FormGroup, InputLabel, TextField, Select, MenuItem } from \"@material-ui/core\";\nimport moment from 'moment';\nimport SimpleHeader from \"components/Headers/SimpleHeader.js\";\nimport { firebase } from '../../../auth/FirebaseAuth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar incident_types_all = ['ALL', 'ACCIDENTS', 'ROADWORK', 'UTILITY WORK', 'ROAD CLOSED', 'DEBRIS', 'VEHICLE FIRE', 'EMERGENCY VEHICLES', 'ER VEHICLE', 'MOVING ROADWORK', 'STALLED VEHICLE'];\nvar counties_all = ['ALL', 'ST. LOUIS', 'WARREN', 'STE. GENEVIEVE', 'JEFFERSON', 'PERRY', 'LINCOLN', 'ST. CHARLES', 'ST. LOUIS CITY', 'FRANKLIN'];\nvar dateArr = new Date().toISOString().split(':', 2);\nvar today = dateArr[0] + \":\" + dateArr[1];\nvar date = new Date();\ndate.setDate(date.getDate() - 7);\nvar last_weekArr = date.toISOString().split(':', 2);\nvar last_week = last_weekArr[0] + \":\" + last_weekArr[1];\n\nfunction Incidents(props) {\n  _s();\n\n  var _this = this;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _React$useState = React.useState(last_week),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      startDate = _React$useState2[0],\n      setStartDate = _React$useState2[1];\n\n  var _React$useState3 = React.useState(today),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      endDate = _React$useState4[0],\n      setEndDate = _React$useState4[1]; // const [allIncidents,setAllincidents] = useState(1);\n\n\n  var _useState3 = useState(['ALL']),\n      _useState4 = _slicedToArray(_useState3, 2),\n      counties = _useState4[0],\n      setCounties = _useState4[1]; // const [construction, setConstruction] = useState(0);\n  // const [utility, setUtility] = useState(0);\n\n\n  var _useState5 = useState(['ALL']),\n      _useState6 = _slicedToArray(_useState5, 2),\n      incident_types = _useState6[0],\n      setIncidentypes = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      blogs = _useState8[0],\n      setBlogs = _useState8[1]; // const [roadclosure, setRoadclosed] = useState(0);\n\n\n  var _useState9 = useState('Incidents_'.concat(moment().unix())),\n      _useState10 = _slicedToArray(_useState9, 2),\n      fileName = _useState10[0],\n      setFileName = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      queryResults = _useState12[0],\n      setQueryResult = _useState12[1];\n\n  var _useState13 = useState(null),\n      _useState14 = _slicedToArray(_useState13, 2),\n      serverResponse = _useState14[0],\n      setServerResponse = _useState14[1];\n\n  var _useState15 = useState(0),\n      _useState16 = _slicedToArray(_useState15, 2),\n      timer = _useState16[0],\n      setTimer = _useState16[1]; // const uuid = firebase.auth().currentUser.uid\n  // console.log(firebase.auth().currentUser.uid)\n\n\n  useEffect(function () {\n    var timer = null;\n\n    if (loading) {\n      timer = setInterval(function () {\n        var obj = queryResults[queryResults.length - 1];\n        var diff = Math.round(Math.abs((new Date() - new Date(obj.querySubmitTime)) / 1000));\n        setTimer(diff);\n      }, 1000);\n    }\n\n    return function () {\n      if (queryResults.length) {\n        queryResults[queryResults.length - 1].status = 'completed';\n      }\n\n      clearInterval(timer);\n    };\n  }, [loading]);\n  useEffect(function () {\n    if (timer) {\n      queryResults[queryResults.length - 1].queryResponseTime = timer;\n    }\n  }, [timer]);\n  useEffect(function () {\n    if (serverResponse) {\n      queryResults[queryResults.length - 1].url = serverResponse.result;\n      queryResults[queryResults.length - 1].status = serverResponse.status;\n      setQueryResult(queryResults);\n    }\n  }, [serverResponse]); // useEffect(() => {\n  // \tfetchBlogs();\n  //   }, [])\n  // const fetchBlogs=async()=>{\n  // \t// const uuid = firebase.auth().currentUser.uid\n  // \tconst response=firebase.firestore().collection('downloads').doc('transcoreIncidents').collection('xfHAePKCECPPtuBwk9CQRSr8GQO2')\t\t\n  // \t// const response=firebase.firestore().collection('downloads');\n  // \tconst data=await response.get();\n  // \tdata.docs.forEach(item=>{\n  // \t\tsetBlogs([...blogs,item.data()])\n  // \t})\n  // }\n  // useEffect(() =>{\n  // \tfetchBlogs_()\n  // })\n  // const fetchBlogs_=async()=>{\n  // \tfirebase.auth().onAuthStateChanged((user) =>{\n  // \t\tif (user) {\n  // \t\t\tvar uuid = firebase.auth().currentUser.uid\n  // \t\t\t// console.log(uuid)\n  // \t\t\tconst response=firebase.firestore().collection('downloads').doc('transcoreIncidents').collection(uuid);\n  // \t\t\tresponse.get().then(snapshot=>{\n  // \t\t\t\tsnapshot.forEach((doc) =>{\n  // \t\t\t\t\t// console.log(doc.data())\n  // \t\t\t\t\tsetBlogs([...blogs,doc.data()])\n  // \t\t\t\t})\n  // \t\t\t})\n  // \t\t}\n  // \t})\n  // }\n\n  useEffect(function () {\n    firebase.auth().onAuthStateChanged(function (user) {\n      // console.log(user)\n      var response = firebase.firestore().collection('downloads').doc('transcoreIncidents').collection(user.uid);\n      response.get().then(function (snapshot) {\n        // console.log(snapshot)\n        snapshot.forEach(function (doc) {\n          // console.log(doc.data())\n          setBlogs([].concat(_toConsumableArray(blogs), [doc.data()]));\n        });\n      });\n    }); // console.log(blogs)\n  }); // const fetchBlogs_=async()=>{\n  // \tfirebase.auth().onAuthStateChanged((user) =>{\n  // \t\tif (user) {\n  // \t\t\tvar uuid = firebase.auth().currentUser.uid\n  // \t\t\t// console.log(uuid)\n  // \t\t\tconst response=firebase.firestore().collection('downloads').doc('transcoreIncidents').collection(uuid);\n  // \t\t\tresponse.get().then(snapshot=>{\n  // \t\t\t\tsnapshot.forEach((doc) =>{\n  // \t\t\t\t\t// console.log(doc.data())\n  // \t\t\t\t\tsetBlogs([...blogs,doc.data()])\n  // \t\t\t\t})\n  // \t\t\t})\n  // \t\t}\n  // \t})\n  // }\n\n  var onSubmit = function onSubmit() {\n    if (incident_types.length == 0 && counties.length == 0) {\n      alert('Please select atleast one field');\n      return;\n    } // if ((!accident) && (!construction)&& (!utility)&& (!roadclosure)){\n    // \talert('Please select atleast one field');\n    // \treturn;\n    // }\n\n\n    if (fileName.trim().length === 0) {\n      alert('Please enter file name.');\n      return;\n    }\n\n    setLoading(true);\n    var results = [].concat(_toConsumableArray(queryResults), [{\n      status: 'progress',\n      querySubmitTime: new Date().toISOString(),\n      queryResponseTime: 0,\n      url: ''\n    }]);\n    setQueryResult(results);\n    var starttime = new Date();\n    fetch( // `http://127.0.0.1:8000/transcore/incident/StartDate/${startDate}/EndDate/${endDate}/Accident/${accident}/Construction/${construction}/Utility/${utility}/RoadClosed/${roadclosure}/FileName/${fileName}`, {\n    \"http://127.0.0.1:8000/transcore/incident/StartDate/\".concat(startDate, \"/EndDate/\").concat(endDate, \"/IncidenTypes/\").concat(incident_types, \"/County/\").concat(counties, \"/FileName/\").concat(fileName), {}).then(function (res) {\n      return res.json();\n    }).then(function (response) {\n      //  console.log(response)\n      var rstval = Math.abs((new Date(response[2]) - starttime) / 1000).toString();\n      setLoading(false);\n      setServerResponse({\n        result: response[0],\n        status: 'completed',\n        filename: response[1]\n      });\n      var uuid = firebase.auth().currentUser.uid;\n      var unixTime = new Date().getTime().toString();\n      var messageRef = firebase.firestore().collection('downloads');\n      messageRef.doc('transcoreIncidents').collection(uuid).doc().set({\n        'location': response[0],\n        'uid': uuid,\n        'filename': response[1],\n        'queryDate': unixTime,\n        'type': 'transcoreIncidents',\n        'queryResponse': rstval\n      });\n    }).catch(function (err) {\n      console.log('error!!!!!!!');\n      console.log(err);\n    });\n  };\n\n  var download = function download(url) {\n    window.open(url);\n  };\n\n  var handleChangeMultiple = function handleChangeMultiple(event) {\n    var options = event.target.options;\n    var value = [];\n\n    for (var i = 0, l = options.length; i < l; i += 1) {\n      if (options[i].selected) {\n        value.push(options[i].value);\n      }\n    }\n\n    setIncidentypes(value);\n  };\n\n  var handleChangeCounties = function handleChangeCounties(event) {\n    var options = event.target.options;\n    var value = [];\n\n    for (var i = 0, l = options.length; i < l; i += 1) {\n      if (options[i].selected) {\n        value.push(options[i].value);\n      }\n    }\n\n    setCounties(value); // console.log(counties)\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(SimpleHeader, {\n      name: \"Form elements\",\n      parentName: \"Forms\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      className: \"mt--6\",\n      fluid: true,\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"cus_container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"heading incidents_clr\",\n          children: \"Query Incidents Database\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"timing\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dates\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Start Date & Time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              id: \"datetime\",\n              type: \"datetime-local\",\n              defaultValue: startDate,\n              InputProps: {\n                disableUnderline: true\n              },\n              onChange: function onChange(e) {\n                setStartDate(e.target.value);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dates\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"End Date & Time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              id: \"datetime-local\",\n              type: \"datetime-local\",\n              defaultValue: endDate,\n              InputProps: {\n                disableUnderline: true\n              },\n              onChange: function onChange(e) {\n                setEndDate(e.target.value);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"aggregation-interval\",\n          children: /*#__PURE__*/_jsxDEV(FormControl, {\n            children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n              shrink: true,\n              htmlFor: \"aggregation-interval\",\n              children: \"Incident Types\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              multiple: true,\n              native: true,\n              value: incident_types,\n              onChange: handleChangeMultiple,\n              inputProps: {\n                id: 'select-multiple-native'\n              },\n              children: incident_types_all.map(function (name) {\n                return /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: name,\n                  children: name\n                }, name, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 302,\n                  columnNumber: 10\n                }, _this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"aggregation-interval\",\n          children: /*#__PURE__*/_jsxDEV(FormControl, {\n            children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n              shrink: true,\n              htmlFor: \"aggregation-interval\",\n              children: \"County\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              multiple: true,\n              native: true,\n              value: counties,\n              onChange: handleChangeCounties,\n              inputProps: {\n                id: 'select-multiple-native'\n              },\n              children: counties_all.map(function (name) {\n                return /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: name,\n                  children: name\n                }, name, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 325,\n                  columnNumber: 10\n                }, _this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"file-name\",\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            id: \"file-name\",\n            label: \"File Name\",\n            type: \"text\",\n            defaultValue: fileName,\n            InputLabelProps: {\n              shrink: true\n            },\n            onChange: function onChange(e) {\n              return setFileName(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"button\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            className: \"incidents_clr\",\n            variant: \"contained\",\n            disabled: loading,\n            onClick: onSubmit,\n            children: \"SUBMIT QUERY\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      className: \"mt--10\",\n      fluid: true,\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n          className: \"border-0\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"mb-0\",\n            children: \"Query Results\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 19\n        }, this), /*#__PURE__*/_jsxDEV(Table, {\n          className: \"align-items-center table-flush\",\n          responsive: true,\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"thead-light\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                style: {\n                  backgroundColor: '#172b4d',\n                  color: '#fff'\n                },\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 368,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                style: {\n                  backgroundColor: '#172b4d',\n                  color: '#fff'\n                },\n                children: \"Downloads and Reports\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 371,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                style: {\n                  backgroundColor: '#172b4d',\n                  color: '#fff'\n                },\n                children: \"Query Date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 23\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            className: \"list\",\n            children: [firebase.firestore().collection(\"ycVf4B0FNOMekJKEpzV4dhcl2WJ3\").get().then(function (snapshot) {\n              console.log(snapshot.docs);\n            }), queryResults.length ? queryResults.map(function (result, index) {\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"button\",\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      className: \"incidents_clr\",\n                      variant: \"contained\",\n                      disabled: result.status === 'progress' ? true : false,\n                      onClick: function onClick() {\n                        return download(result.url);\n                      },\n                      children: result.status === 'progress' ? 'Downloading' : 'Download Ready'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 434,\n                      columnNumber: 11\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 433,\n                    columnNumber: 10\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 432,\n                  columnNumber: 9\n                }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"budget\",\n                  children: [\"Query returned in \", result.queryResponseTime > 60 ? result.queryResponseTime / 60 : result.queryResponseTime, \" seconds\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 447,\n                  columnNumber: 9\n                }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: moment(result.querySubmitTime).format('MMM DD, YYYY hh:mm A')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 451,\n                  columnNumber: 9\n                }, _this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 431,\n                columnNumber: 16\n              }, _this);\n            }) : /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: /*#__PURE__*/_jsxDEV(\"td\", {\n                colSpan: \"3\",\n                style: {\n                  textAlign: 'center',\n                  fontSize: 20\n                },\n                children: \"Data not found.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 461,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 460,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Incidents, \"BK41PLOEqF/XUA5TdUTqAcdvBRA=\");\n\n_c = Incidents;\nexport default Incidents;\n\nvar _c;\n\n$RefreshReg$(_c, \"Incidents\");","map":{"version":3,"sources":["/Users/jaylenthomas/Downloads/modot_web/titanv2/src/views/pages/data-download/Incidents.js"],"names":["React","useState","useEffect","Card","CardHeader","Container","Table","Button","Checkbox","FormControlLabel","FormControl","FormGroup","InputLabel","TextField","Select","MenuItem","moment","SimpleHeader","firebase","incident_types_all","counties_all","dateArr","Date","toISOString","split","today","date","setDate","getDate","last_weekArr","last_week","Incidents","props","loading","setLoading","startDate","setStartDate","endDate","setEndDate","counties","setCounties","incident_types","setIncidentypes","blogs","setBlogs","concat","unix","fileName","setFileName","queryResults","setQueryResult","serverResponse","setServerResponse","timer","setTimer","setInterval","obj","length","diff","Math","round","abs","querySubmitTime","status","clearInterval","queryResponseTime","url","result","auth","onAuthStateChanged","user","response","firestore","collection","doc","uid","get","then","snapshot","forEach","data","onSubmit","alert","trim","results","starttime","fetch","res","json","rstval","toString","filename","uuid","currentUser","unixTime","getTime","messageRef","set","catch","err","console","log","download","window","open","handleChangeMultiple","event","options","target","value","i","l","selected","push","handleChangeCounties","disableUnderline","e","id","map","name","shrink","backgroundColor","color","docs","index","format","textAlign","fontSize"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n// reactstrap components\r\nimport {\r\n\tCard,\r\n  \tCardHeader,\r\n\tContainer,\r\n\tTable,\r\n} from \"reactstrap\";\r\n\r\n// import DateTimePicker from '@material-ui/lab/DateTimePicker';\r\n\r\nimport {\r\n\tButton,\r\n\tCheckbox,\r\n\tFormControlLabel,\r\n\tFormControl,\r\n\tFormGroup,\r\n\tInputLabel,\r\n\tTextField,\r\n\tSelect,\r\n\tMenuItem\r\n} from \"@material-ui/core\";\r\nimport moment from 'moment';\r\nimport SimpleHeader from \"components/Headers/SimpleHeader.js\";\r\nimport {firebase} from '../../../auth/FirebaseAuth'\r\n\r\n\r\nvar incident_types_all = [\r\n\t'ALL','ACCIDENTS','ROADWORK','UTILITY WORK','ROAD CLOSED','DEBRIS','VEHICLE FIRE',\r\n\t'EMERGENCY VEHICLES','ER VEHICLE','MOVING ROADWORK','STALLED VEHICLE'\r\n]\r\n\r\nvar counties_all = ['ALL','ST. LOUIS','WARREN','STE. GENEVIEVE','JEFFERSON','PERRY',\r\n'LINCOLN','ST. CHARLES','ST. LOUIS CITY','FRANKLIN']\r\n\r\nconst dateArr = new Date().toISOString().split(':', 2);\r\nconst today = dateArr[0] + \":\" + dateArr[1];\r\n\r\nvar date = new Date();\r\ndate.setDate(date.getDate() - 7);\r\nconst last_weekArr = date.toISOString().split(':', 2);\r\nconst last_week = last_weekArr[0] + \":\" + last_weekArr[1];\r\n\r\nfunction Incidents(props) {\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst [startDate, setStartDate] = React.useState(last_week);\r\n\tconst [endDate, setEndDate] = React.useState(today);\r\n\t// const [allIncidents,setAllincidents] = useState(1);\r\n\tconst [counties, setCounties] = useState(['ALL']);\r\n\t// const [construction, setConstruction] = useState(0);\r\n\t// const [utility, setUtility] = useState(0);\r\n\tconst [incident_types, setIncidentypes] = useState(['ALL']);\r\n\tconst [blogs,setBlogs]=useState([])\r\n\r\n\t// const [roadclosure, setRoadclosed] = useState(0);\r\n\tconst [fileName, setFileName] = useState('Incidents_'.concat(moment().unix()));\r\n\tconst [queryResults, setQueryResult] = useState([]);\r\n\tconst [serverResponse, setServerResponse] = useState(null);\r\n\tconst [timer, setTimer] = useState(0);\r\n\t// const uuid = firebase.auth().currentUser.uid\r\n\t// console.log(firebase.auth().currentUser.uid)\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\tlet timer = null;\r\n\t\tif (loading) {\r\n\t\t\ttimer = setInterval(() => {\r\n\t\t\t\tvar obj = queryResults[queryResults.length - 1];\r\n\t\t\t\tconst diff = Math.round(\r\n\t\t\t\t\tMath.abs((new Date() - new Date(obj.querySubmitTime)) / 1000));\r\n\t\t\t\tsetTimer(diff);\r\n\t\t\t}, 1000);\r\n\t\t}\r\n\t\treturn () => {\r\n\t\t\tif (queryResults.length) {\r\n\t\t\t\tqueryResults[queryResults.length - 1].status = 'completed';\r\n\t\t\t}\r\n\t\t\tclearInterval(timer);\r\n\t\t};\r\n\t},[loading]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (timer) {\r\n\t\t\tqueryResults[queryResults.length - 1].queryResponseTime = timer;\r\n\t\t}\r\n\t}, [timer]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (serverResponse) {\r\n\t\t\tqueryResults[queryResults.length - 1].url = serverResponse.result;\r\n\t\t\tqueryResults[queryResults.length - 1].status = serverResponse.status;\r\n\t\t\tsetQueryResult(queryResults);\r\n\t\t}\r\n\t}, [serverResponse]);\r\n\r\n\t// useEffect(() => {\r\n\t// \tfetchBlogs();\r\n\t//   }, [])\r\n\r\n\t// const fetchBlogs=async()=>{\r\n\t// \t// const uuid = firebase.auth().currentUser.uid\r\n\t// \tconst response=firebase.firestore().collection('downloads').doc('transcoreIncidents').collection('xfHAePKCECPPtuBwk9CQRSr8GQO2')\t\t\r\n\t// \t// const response=firebase.firestore().collection('downloads');\r\n\t// \tconst data=await response.get();\r\n\t// \tdata.docs.forEach(item=>{\r\n\t// \t\tsetBlogs([...blogs,item.data()])\r\n\t// \t})\r\n\t// }\r\n\r\n\t// useEffect(() =>{\r\n\t// \tfetchBlogs_()\r\n\t// })\r\n\r\n\t// const fetchBlogs_=async()=>{\r\n\r\n\t// \tfirebase.auth().onAuthStateChanged((user) =>{\r\n\t// \t\tif (user) {\r\n\t// \t\t\tvar uuid = firebase.auth().currentUser.uid\r\n\t// \t\t\t// console.log(uuid)\r\n\t// \t\t\tconst response=firebase.firestore().collection('downloads').doc('transcoreIncidents').collection(uuid);\r\n\t// \t\t\tresponse.get().then(snapshot=>{\r\n\t// \t\t\t\tsnapshot.forEach((doc) =>{\r\n\t// \t\t\t\t\t// console.log(doc.data())\r\n\t// \t\t\t\t\tsetBlogs([...blogs,doc.data()])\r\n\t// \t\t\t\t})\r\n\t// \t\t\t})\r\n\t// \t\t}\r\n\t// \t})\r\n\t// }\r\n\tuseEffect(() =>{\r\n\t\tfirebase.auth().onAuthStateChanged((user) =>{\r\n\r\n\t\t\t// console.log(user)\r\n\t\t\tconst response=firebase.firestore().collection('downloads').doc('transcoreIncidents').collection(user.uid);\r\n\t\t\tresponse.get().then(snapshot=>{\r\n\t\t\t\t// console.log(snapshot)\r\n\t\t\t\tsnapshot.forEach((doc) =>{\r\n\t\t\t\t\t// console.log(doc.data())\r\n\t\t\t\t\tsetBlogs([...blogs,doc.data()])\r\n\t\t\t\t})\r\n\t\t\t})\r\n\r\n\t\t})\r\n\t\t// console.log(blogs)\r\n\r\n\t})\r\n\r\n\t\t// const fetchBlogs_=async()=>{\r\n\t// \tfirebase.auth().onAuthStateChanged((user) =>{\r\n\t// \t\tif (user) {\r\n\t// \t\t\tvar uuid = firebase.auth().currentUser.uid\r\n\t// \t\t\t// console.log(uuid)\r\n\t// \t\t\tconst response=firebase.firestore().collection('downloads').doc('transcoreIncidents').collection(uuid);\r\n\t// \t\t\tresponse.get().then(snapshot=>{\r\n\t// \t\t\t\tsnapshot.forEach((doc) =>{\r\n\t// \t\t\t\t\t// console.log(doc.data())\r\n\t// \t\t\t\t\tsetBlogs([...blogs,doc.data()])\r\n\t// \t\t\t\t})\r\n\t// \t\t\t})\r\n\t// \t\t}\r\n\t// \t})\r\n\t// }\r\n\r\n\r\n\tconst onSubmit = () => {\r\n\t\tif ((incident_types.length==0) && (counties.length==0)){\r\n\t\t\talert('Please select atleast one field');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// if ((!accident) && (!construction)&& (!utility)&& (!roadclosure)){\r\n\t\t// \talert('Please select atleast one field');\r\n\t\t// \treturn;\r\n\t\t// }\r\n\r\n\t\tif (fileName.trim().length === 0) {\r\n\t\t  alert('Please enter file name.');\r\n\t\t  return;\r\n\t\t}\r\n\t\tsetLoading(true);\r\n\t\tvar results = [...queryResults, {\r\n\t\t\tstatus: 'progress',\r\n\t\t\tquerySubmitTime: new Date().toISOString(),\r\n\t\t\tqueryResponseTime: 0,\r\n\t\t\turl: '',\r\n\t\t}];\r\n\t\tsetQueryResult(results);\r\n\t\tlet starttime = new Date()\r\n\t\tfetch(\r\n\t\t\t// `http://127.0.0.1:8000/transcore/incident/StartDate/${startDate}/EndDate/${endDate}/Accident/${accident}/Construction/${construction}/Utility/${utility}/RoadClosed/${roadclosure}/FileName/${fileName}`, {\r\n\t\t  `http://127.0.0.1:8000/transcore/incident/StartDate/${startDate}/EndDate/${endDate}/IncidenTypes/${incident_types}/County/${counties}/FileName/${fileName}`, {\r\n\t\t  })\r\n\t\t.then(res => {\r\n\t\t  return res.json();\r\n\t\t }).then(response => {\r\n\t\t\t//  console.log(response)\r\n\t\t\t var rstval = Math.abs((new Date(response[2]) - starttime) / 1000).toString()\r\n\t\t   setLoading(false);\r\n\t\t   setServerResponse({\r\n\t\t\tresult: response[0],\r\n\t\t\tstatus: 'completed',\r\n\t\t\tfilename:response[1],\r\n\t\t   });\r\n\r\n\t\t\tlet uuid = firebase.auth().currentUser.uid\r\n\t\t\tlet unixTime = new Date().getTime().toString()\r\n\t\t\t\r\n\t\t\tconst messageRef = firebase.firestore().collection('downloads')\r\n\r\n\t\t\tmessageRef.doc('transcoreIncidents').collection(uuid).doc().set({'location':response[0], \r\n\t\t\t'uid':uuid,'filename':response[1], 'queryDate':unixTime,'type':'transcoreIncidents',\r\n\t\t\t'queryResponse':rstval})\r\n\r\n\t\t })\r\n\t\t .catch(err => {\r\n\t\t\tconsole.log('error!!!!!!!');\r\n\t\t\tconsole.log(err);\r\n\t\t});\r\n\t}\r\n\r\n\tconst download = url => {\r\n\t\twindow.open(url);\r\n\t}\r\n\r\n\tconst handleChangeMultiple = (event) => {\r\n\t\tconst { options } = event.target;\r\n\t\tconst value = [];\r\n\t\tfor (let i = 0, l = options.length; i < l; i += 1) {\r\n\t\t  if (options[i].selected) {\r\n\t\t\tvalue.push(options[i].value);\r\n\t\t  }\r\n\t\t}\r\n\t\tsetIncidentypes(value);\r\n\t\t\r\n\t};\r\n\r\n\tconst handleChangeCounties = (event) => {\r\n\t\tconst { options } = event.target;\r\n\t\tconst value = [];\r\n\t\tfor (let i = 0, l = options.length; i < l; i += 1) {\r\n\t\t  if (options[i].selected) {\r\n\t\t\tvalue.push(options[i].value);\r\n\t\t  }\r\n\t\t}\r\n\t\tsetCounties(value);\r\n\t\t// console.log(counties)\r\n\t};\r\n\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<SimpleHeader name=\"Form elements\" parentName=\"Forms\" />\r\n\r\n\t\t\t<Container className=\"mt--6\" fluid>\r\n\t\t\t\t<form className=\"cus_container\">\r\n\t\t\t\t\t<div className=\"heading incidents_clr\">\r\n\t\t\t\t\t\tQuery Incidents Database\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"timing\">\r\n\r\n\t\t\t\t\t\t<div className=\"dates\">\r\n\t\t\t\t\t\t\t<span>Start Date &amp; Time</span>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tid=\"datetime\"\r\n\t\t\t\t\t\t\t\ttype=\"datetime-local\"\r\n\t\t\t\t\t\t\t\tdefaultValue={startDate}\r\n\t\t\t\t\t\t\t\tInputProps={{ disableUnderline: true }}\r\n\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\tsetStartDate(e.target.value);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"dates\">\r\n\t\t\t\t\t\t\t<span>End Date &amp; Time</span>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tid=\"datetime-local\"\r\n\t\t\t\t\t\t\t\ttype=\"datetime-local\"\r\n\t\t\t\t\t\t\t\tdefaultValue={endDate}\r\n\t\t\t\t\t\t\t\tInputProps={{ disableUnderline: true }}\r\n\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\tsetEndDate(e.target.value);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\t<div className=\"aggregation-interval\">\r\n\t\t\t\t\t\t<FormControl>\r\n\t\t\t\t\t\t\t<InputLabel shrink htmlFor=\"aggregation-interval\">\r\n\t\t\t\t\t\t\t\tIncident Types\r\n\t\t\t\t\t\t\t</InputLabel>\r\n\t\t\t\t\t\t\t<Select \r\n\t\t\t\t\t\t\t\tmultiple\r\n\t\t\t\t\t\t\t\tnative\r\n\t\t\t\t\t\t\t\tvalue={incident_types}\r\n\t\t\t\t\t\t\t\tonChange={handleChangeMultiple}\r\n\t\t\t\t\t\t\t\tinputProps={{\r\n\t\t\t\t\t\t\t\t\tid: 'select-multiple-native',\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{incident_types_all.map((name) =>(\r\n\t\t\t\t\t\t\t\t\t<option key={name} value={name}>\r\n\t\t\t\t\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"aggregation-interval\">\r\n\t\t\t\t\t\t<FormControl>\r\n\t\t\t\t\t\t\t<InputLabel shrink htmlFor=\"aggregation-interval\">\r\n\t\t\t\t\t\t\t\tCounty\r\n\t\t\t\t\t\t\t</InputLabel>\r\n\t\t\t\t\t\t\t<Select \r\n\t\t\t\t\t\t\t\tmultiple\r\n\t\t\t\t\t\t\t\tnative\r\n\t\t\t\t\t\t\t\tvalue={counties}\r\n\t\t\t\t\t\t\t\tonChange={handleChangeCounties}\r\n\t\t\t\t\t\t\t\tinputProps={{\r\n\t\t\t\t\t\t\t\t\tid: 'select-multiple-native',\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{counties_all.map((name) =>(\r\n\t\t\t\t\t\t\t\t\t<option key={name} value={name}>\r\n\t\t\t\t\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t</div>\r\n\r\n\r\n\t\t\t\t\t<div className=\"file-name\">\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tid=\"file-name\"\r\n\t\t\t\t\t\t\tlabel=\"File Name\"\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tdefaultValue={fileName}\r\n\t\t\t\t\t\t\tInputLabelProps={{\r\n\t\t\t\t\t\t\t\tshrink: true,\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tonChange={(e) => setFileName(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"button\">\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tclassName=\"incidents_clr\"\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tdisabled={loading}\r\n\t\t\t\t\t\t\tonClick={onSubmit}>\r\n\t\t\t\t\t\t\t\tSUBMIT QUERY\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</Container>\r\n\r\n\t\t\t<Container className=\"mt--10\" fluid>\r\n\r\n                <Card>\r\n                  <CardHeader className=\"border-0\">\r\n                    <h3 className=\"mb-0\">Query Results</h3>\r\n                  </CardHeader>\r\n                  <Table className=\"align-items-center table-flush\" responsive>\r\n                    <thead className=\"thead-light\">\r\n                      <tr>\r\n                        <th scope=\"col\" style={{backgroundColor: '#172b4d', color: '#fff'}}>\r\n                          Status\r\n                        </th>\r\n                        <th scope=\"col\" style={{backgroundColor: '#172b4d', color: '#fff'}}>\r\n                          Downloads and Reports\r\n                        </th>\r\n                        <th scope=\"col\" style={{backgroundColor: '#172b4d', color: '#fff'}}>\r\n                          Query Date\r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody className=\"list\">\r\n\t\t\t\t\t{/* {console.log(blogs.length)} */}\r\n\t\t\t\t\t{/* {blogs.length ? (\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tblogs.map((result, index) => {\r\n\t\t\t\t\t\t\t\treturn <tr key={index}>\r\n\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t<div className=\"button\">\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"incidents_clr\"\r\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={\r\n\t\t\t\t\t\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => download(result.location)}>\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t// result.status === 'progress' ? 'Downloading' : 'Download Ready'\r\n\t\t\t\t\t\t\t\t\t\t\t\t'Download Ready'\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td className=\"budget\">\r\n\t\t\t\t\t\t\t\t\tQuery returned in {result.queryDate}\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t{ \r\n\t\t\t\t\t\t\t\t\t\tmoment.unix(result.queryDate).format(\"DD-MM-YYYY HH:mm:ss\")\r\n\t\t\t\t\t\t\t\t\t\t// console.log(result.queryDate)\r\n\t\t\t\t\t\t\t\t\t\t// moment(new Date(result.queryDate*1000)).format(\"DD-MM-YYYY HH:mm:ss\")\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t) : \r\n\t\t\t\t\t\tconsole.log('flames')\r\n\t\t\t\t\t\t// (\r\n\t\t\t\t\t\t// \t<tr>\r\n\t\t\t\t\t\t// \t\t<td colSpan=\"3\" style={{textAlign: 'center', fontSize: 20}}>\r\n\t\t\t\t\t\t// \t\t\tData not found.\r\n\t\t\t\t\t\t// \t\t</td>\r\n\t\t\t\t\t\t// \t</tr>\r\n\t\t\t\t\t\t// )\r\n\t\t\t\t\t\t} */}\r\n\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\tfirebase.firestore().collection(\"ycVf4B0FNOMekJKEpzV4dhcl2WJ3\").get().then((snapshot) => {\r\n    \t\t\t\t\t\tconsole.log(snapshot.docs);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t{queryResults.length ? (\r\n\t\t\t\t\t\t\tqueryResults.map((result, index) => {\r\n\t\t\t\t\t\t\t\treturn <tr key={index}>\r\n\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t<div className=\"button\">\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"incidents_clr\"\r\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={\r\n\t\t\t\t\t\t\t\t\t\t\t\tresult.status === 'progress' ? true : false\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => download(result.url)}>\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tresult.status === 'progress' ? 'Downloading' : 'Download Ready'\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td className=\"budget\">\r\n\t\t\t\t\t\t\t\t\tQuery returned in {\r\n\t\t\t\t\t\t\t\t\tresult.queryResponseTime > 60 ? result.queryResponseTime / 60 :  result.queryResponseTime} seconds\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t{ \r\n\t\t\t\t\t\t\t\t\t\tmoment(result.querySubmitTime).format(\r\n\t\t\t\t\t\t\t\t\t\t\t'MMM DD, YYYY hh:mm A')\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<td colSpan=\"3\" style={{textAlign: 'center', fontSize: 20}}>\r\n\t\t\t\t\t\t\t\t\tData not found.\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t)}\r\n                    </tbody>\r\n                  </Table>\r\n                </Card>\r\n\t\t\t</Container>\r\n\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default Incidents;\r\n"]},"metadata":{},"sourceType":"module"}