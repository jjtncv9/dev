{"ast":null,"code":"import _toConsumableArray from \"/Users/jaylenthomas/Downloads/modot_web/titanv2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/jaylenthomas/Downloads/modot_web/titanv2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/jaylenthomas/Downloads/modot_web/titanv2/src/views/pages/data-download/WazeIncidents.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\"; // reactstrap components\n\nimport { Card, CardHeader, Container, Table } from \"reactstrap\"; // import DateTimePicker from '@material-ui/lab/DateTimePicker';\n\nimport { Button, Checkbox, FormControlLabel, FormGroup, TextField } from \"@material-ui/core\";\nimport moment from 'moment';\nimport { firebase } from '../../../auth/FirebaseAuth'; // import DateFnsUtils from '@date-io/date-fns';\n// import {\n// \tMuiPickersUtilsProvider,\n// \tKeyboardTimePicker,\n// \tKeyboardDatePicker,\n// } from '@material-ui/pickers';\n// import ReactDatetime from \"react-datetime\";\n// core components\n\nimport SimpleHeader from \"components/Headers/SimpleHeader.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar dateArr = new Date().toISOString().split(':', 2);\nvar today = dateArr[0] + \":\" + dateArr[1];\n\nfunction WazeIncidents() {\n  _s();\n\n  var _this = this;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _React$useState = React.useState(today),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      start_date = _React$useState2[0],\n      setStartDate = _React$useState2[1];\n\n  var _React$useState3 = React.useState(today),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      end_date = _React$useState4[0],\n      setEndDate = _React$useState4[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      majorAccident = _useState4[0],\n      setMajorAccident = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      minorAccident = _useState6[0],\n      setMinorAccident = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      construction = _useState8[0],\n      setConstruction = _useState8[1];\n\n  var _useState9 = useState(0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      carStopped = _useState10[0],\n      setCarStopped = _useState10[1];\n\n  var _useState11 = useState(0),\n      _useState12 = _slicedToArray(_useState11, 2),\n      jam = _useState12[0],\n      setJam = _useState12[1];\n\n  var _useState13 = useState(0),\n      _useState14 = _slicedToArray(_useState13, 2),\n      roadClosed = _useState14[0],\n      setRoadClosed = _useState14[1];\n\n  var _useState15 = useState('WazeIncident'.concat(moment().unix())),\n      _useState16 = _slicedToArray(_useState15, 2),\n      filename = _useState16[0],\n      setFileName = _useState16[1];\n\n  var _useState17 = useState([]),\n      _useState18 = _slicedToArray(_useState17, 2),\n      queryResults = _useState18[0],\n      setQueryResult = _useState18[1];\n\n  var _useState19 = useState([]),\n      _useState20 = _slicedToArray(_useState19, 2),\n      blogs = _useState20[0],\n      setBlogs = _useState20[1];\n\n  var _useState21 = useState(null),\n      _useState22 = _slicedToArray(_useState21, 2),\n      serverResponse = _useState22[0],\n      setServerResponse = _useState22[1];\n\n  var _useState23 = useState(0),\n      _useState24 = _slicedToArray(_useState23, 2),\n      timer = _useState24[0],\n      setTimer = _useState24[1];\n\n  useEffect(function () {\n    var timer = null;\n\n    if (loading) {\n      timer = setInterval(function () {\n        var obj = queryResults[queryResults.length - 1];\n        var diff = Math.round(Math.abs((new Date() - new Date(obj.querySubmitTime)) / 1000));\n        setTimer(diff);\n      }, 1000);\n    }\n\n    return function () {\n      if (queryResults.length) {\n        queryResults[queryResults.length - 1].status = 'completed';\n      }\n\n      clearInterval(timer);\n    };\n  }, [loading]);\n  useEffect(function () {\n    if (timer) {\n      queryResults[queryResults.length - 1].queryResponseTime = timer;\n    }\n  }, [timer]);\n  useEffect(function () {\n    if (serverResponse) {\n      queryResults[queryResults.length - 1].url = serverResponse.result;\n      queryResults[queryResults.length - 1].status = serverResponse.status;\n      setQueryResult(queryResults);\n    }\n  }, [serverResponse]);\n  /*\r\n  \tuseEffect(() =>{\r\n  \t\tfirebase.auth().onAuthStateChanged((user) =>{\r\n  \r\n  \t\t\t// console.log(user)\r\n  \t\t\tconst response=firebase.firestore().collection('downloads').doc('transcoreIncidents').collection(user.uid);\r\n  \t\t\tresponse.get().then(snapshot=>{\r\n  \t\t\t\t// console.log(snapshot)\r\n  \t\t\t\tsnapshot.forEach((doc) =>{\r\n  \t\t\t\t\t// console.log(doc.data())\r\n  \t\t\t\t\tsetBlogs([...blogs,doc.data()])\r\n  \t\t\t\t})\r\n  \t\t\t})\r\n  \r\n  \t\t})\r\n  \t\t// console.log(blogs)\r\n  \r\n  \t},[])*/\n\n  useEffect(function () {\n    firebase.auth().onAuthStateChanged(function (user) {\n      // console.log(user)\n      var response = firebase.firestore().collection('downloads').doc('transcoreIncidents').collection(user.uid);\n      response.get().then(function (snapshot) {\n        // console.log(snapshot)\n        snapshot.forEach(function (doc) {\n          // console.log(doc.data())\n          setBlogs([].concat(_toConsumableArray(blogs), [doc.data()]));\n        });\n      });\n    }); // console.log(blogs)\n  }, []);\n\n  var onSubmit = function onSubmit() {\n    if (![majorAccident, minorAccident, construction, carStopped, jam, roadClosed].includes(true)) {\n      alert('Please select atleast one field');\n      return;\n    }\n\n    if (filename.trim().length === 0) {\n      alert('Please enter file name.');\n      return;\n    }\n\n    setLoading(true);\n    var results = [].concat(_toConsumableArray(queryResults), [{\n      status: 'progress',\n      querySubmitTime: new Date().toISOString(),\n      queryResponseTime: 0,\n      url: ''\n    }]);\n    setQueryResult(results);\n    var starttime = new Date();\n    fetch(\"http://127.0.0.1:8000/waze/incident/StartDate/\".concat(start_date, \"/EndDate/\").concat(end_date, \"/MajorAccident/\").concat(majorAccident, \"/MinorAccident/\").concat(minorAccident, \"/Construction/\").concat(construction, \"/CarStopped/\").concat(carStopped, \"/Jam/\").concat(jam, \"/RoadClosed/\").concat(roadClosed, \"/FileName/\").concat(filename)).then(function (res) {\n      return res.json();\n    }).then(function (response) {\n      setLoading(false);\n      setServerResponse({\n        result: response,\n        status: 'completed'\n      }); //    window.open(results);\n\n      var uuid = firebase.auth().currentUser.uid;\n      var unixTime = new Date().getTime().toString();\n    }).catch(function (err) {\n      console.log('error!!!!!!!');\n      console.log(err);\n    });\n  };\n\n  var download = function download(url) {\n    window.open(url);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(SimpleHeader, {\n      name: \"Form elements\",\n      parentName: \"Forms\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      className: \"mt--6\",\n      fluid: true,\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"cus_container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"heading waze_incidents_clr\",\n          children: \"Query WazeIncident Database\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"timing\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dates\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Start Date & Time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              id: \"datetime\",\n              type: \"datetime-local\",\n              defaultValue: start_date,\n              InputProps: {\n                disableUnderline: true\n              },\n              onChange: function onChange(e) {\n                setStartDate(e.target.value);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dates\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"End Date & Time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              id: \"datetime-local\",\n              type: \"datetime-local\",\n              defaultValue: end_date,\n              InputProps: {\n                disableUnderline: true\n              },\n              onChange: function onChange(e) {\n                setEndDate(e.target.value);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"checkboxes\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Data Attributes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n            className: \"checkbox-group\",\n            children: [/*#__PURE__*/_jsxDEV(FormControlLabel, {\n              control: /*#__PURE__*/_jsxDEV(Checkbox, {\n                name: \"major-accidents\",\n                onChange: function onChange(e) {\n                  return setMajorAccident(e.target.checked);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 10\n              }, this),\n              label: \"Major Accidents\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n              control: /*#__PURE__*/_jsxDEV(Checkbox, {\n                name: \"minor-accidents\",\n                onChange: function onChange(e) {\n                  return setMinorAccident(e.target.checked);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 10\n              }, this),\n              label: \"Minor Accidents\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n              control: /*#__PURE__*/_jsxDEV(Checkbox, {\n                name: \"construction\",\n                onChange: function onChange(e) {\n                  return setConstruction(e.target.checked);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 10\n              }, this),\n              label: \"Construction\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n              control: /*#__PURE__*/_jsxDEV(Checkbox, {\n                name: \"car-stopped\",\n                onChange: function onChange(e) {\n                  return setCarStopped(e.target.checked);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 10\n              }, this),\n              label: \"Car Stopped\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n            className: \"checkbox-group w-50\",\n            children: [/*#__PURE__*/_jsxDEV(FormControlLabel, {\n              control: /*#__PURE__*/_jsxDEV(Checkbox, {\n                name: \"jam\",\n                onChange: function onChange(e) {\n                  return setJam(e.target.checked);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 10\n              }, this),\n              label: \"Jam\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n              control: /*#__PURE__*/_jsxDEV(Checkbox, {\n                name: \"road-closed\",\n                onChange: function onChange(e) {\n                  return setRoadClosed(e.target.checked);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 10\n              }, this),\n              label: \"Road Closed\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"file-name\",\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            id: \"file-name\",\n            label: \"File Name\",\n            type: \"text\",\n            defaultValue: filename,\n            InputLabelProps: {\n              shrink: true\n            },\n            onChange: function onChange(e) {\n              return setFileName(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"button\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            className: \"waze_incidents_clr\",\n            variant: \"contained\",\n            disabled: loading,\n            onClick: onSubmit,\n            children: \"SUBMIT QUERY\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      className: \"mt--10\",\n      fluid: true,\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n          className: \"border-0\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"mb-0\",\n            children: \"Query Results\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 19\n        }, this), /*#__PURE__*/_jsxDEV(Table, {\n          className: \"align-items-center table-flush\",\n          responsive: true,\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"thead-light\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                style: {\n                  backgroundColor: '#172b4d',\n                  color: '#fff'\n                },\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                style: {\n                  backgroundColor: '#172b4d',\n                  color: '#fff'\n                },\n                children: \"Downloads and Reports\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                style: {\n                  backgroundColor: '#172b4d',\n                  color: '#fff'\n                },\n                children: \"Query Date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 23\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            className: \"list\",\n            children: queryResults.length ? queryResults.map(function (result, index) {\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"button\",\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      className: \"waze_incidents_clr\",\n                      variant: \"contained\",\n                      disabled: result.status === 'progress' ? true : false,\n                      onClick: function onClick() {\n                        return download(result.url);\n                      },\n                      children: result.status === 'progress' ? 'Downloading' : 'Download Ready'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 314,\n                      columnNumber: 11\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 313,\n                    columnNumber: 10\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 312,\n                  columnNumber: 9\n                }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"budget\",\n                  children: [\"Query returned in \", result.queryResponseTime > 60 ? result.queryResponseTime / 60 : result.queryResponseTime, \" seconds\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 327,\n                  columnNumber: 9\n                }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: moment(result.querySubmitTime).format('MMM DD, YYYY hh:mm A')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 331,\n                  columnNumber: 9\n                }, _this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 16\n              }, _this);\n            }) : /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: /*#__PURE__*/_jsxDEV(\"td\", {\n                colSpan: \"3\",\n                style: {\n                  textAlign: 'center',\n                  fontSize: 20\n                },\n                children: \"Data not found.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 341,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n}\n\n_s(WazeIncidents, \"uN/ULBVIldPlg/xItikHTHCnJac=\");\n\n_c = WazeIncidents;\nexport default WazeIncidents;\n\nvar _c;\n\n$RefreshReg$(_c, \"WazeIncidents\");","map":{"version":3,"sources":["/Users/jaylenthomas/Downloads/modot_web/titanv2/src/views/pages/data-download/WazeIncidents.js"],"names":["React","useState","useEffect","Card","CardHeader","Container","Table","Button","Checkbox","FormControlLabel","FormGroup","TextField","moment","firebase","SimpleHeader","dateArr","Date","toISOString","split","today","WazeIncidents","loading","setLoading","start_date","setStartDate","end_date","setEndDate","majorAccident","setMajorAccident","minorAccident","setMinorAccident","construction","setConstruction","carStopped","setCarStopped","jam","setJam","roadClosed","setRoadClosed","concat","unix","filename","setFileName","queryResults","setQueryResult","blogs","setBlogs","serverResponse","setServerResponse","timer","setTimer","setInterval","obj","length","diff","Math","round","abs","querySubmitTime","status","clearInterval","queryResponseTime","url","result","auth","onAuthStateChanged","user","response","firestore","collection","doc","uid","get","then","snapshot","forEach","data","onSubmit","includes","alert","trim","results","starttime","fetch","res","json","uuid","currentUser","unixTime","getTime","toString","catch","err","console","log","download","window","open","disableUnderline","e","target","value","checked","shrink","backgroundColor","color","map","index","format","textAlign","fontSize"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n// reactstrap components\r\nimport {\r\n\tCard,\r\n  \tCardHeader,\r\n\tContainer,\r\n\tTable\r\n} from \"reactstrap\";\r\n\r\n// import DateTimePicker from '@material-ui/lab/DateTimePicker';\r\n\r\nimport {\r\n\tButton,\r\n\tCheckbox,\r\n\tFormControlLabel,\r\n\tFormGroup,\r\n\tTextField,\r\n} from \"@material-ui/core\";\r\nimport moment from 'moment';\r\nimport {firebase} from '../../../auth/FirebaseAuth'\r\n// import DateFnsUtils from '@date-io/date-fns';\r\n\r\n// import {\r\n// \tMuiPickersUtilsProvider,\r\n// \tKeyboardTimePicker,\r\n// \tKeyboardDatePicker,\r\n// } from '@material-ui/pickers';\r\n\r\n// import ReactDatetime from \"react-datetime\";\r\n// core components\r\nimport SimpleHeader from \"components/Headers/SimpleHeader.js\";\r\n\r\nconst dateArr = new Date().toISOString().split(':', 2);\r\nconst today = dateArr[0] + \":\" + dateArr[1];\r\n\r\nfunction WazeIncidents() {\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst [start_date, setStartDate] = React.useState(today);\r\n\tconst [end_date, setEndDate] = React.useState(today);\r\n\tconst [majorAccident, setMajorAccident] = useState(0);\r\n\tconst [minorAccident, setMinorAccident] = useState(0);\r\n\tconst [construction, setConstruction] = useState(0);\r\n\tconst [carStopped, setCarStopped] = useState(0);\r\n\tconst [jam, setJam] = useState(0);\r\n\tconst [roadClosed, setRoadClosed] = useState(0);\r\n\tconst [filename, setFileName] = useState('WazeIncident'.concat(moment().unix()));\r\n\tconst [queryResults, setQueryResult] = useState([]);\r\n\tconst [blogs,setBlogs]=useState([]);\r\n\tconst [serverResponse, setServerResponse] = useState(null);\r\n\tconst [timer, setTimer] = useState(0);\r\n\r\n\tuseEffect(() => {\r\n\t\tlet timer = null;\r\n\t\tif (loading) {\r\n\t\t\ttimer = setInterval(() => {\r\n\t\t\t\tvar obj = queryResults[queryResults.length - 1];\r\n\t\t\t\tconst diff = Math.round(\r\n\t\t\t\t\tMath.abs((new Date() - new Date(obj.querySubmitTime)) / 1000));\r\n\t\t\t\tsetTimer(diff);\r\n\t\t\t}, 1000);\r\n\t\t}\r\n\t\treturn () => {\r\n\t\t\tif (queryResults.length) {\r\n\t\t\t\tqueryResults[queryResults.length - 1].status = 'completed';\r\n\t\t\t}\r\n\t\t\tclearInterval(timer);\r\n\t\t};\r\n\t},[loading]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (timer) {\r\n\t\t\tqueryResults[queryResults.length - 1].queryResponseTime = timer;\r\n\t\t}\r\n\t}, [timer]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (serverResponse) {\r\n\t\t\tqueryResults[queryResults.length - 1].url = serverResponse.result;\r\n\t\t\tqueryResults[queryResults.length - 1].status = serverResponse.status;\r\n\t\t\tsetQueryResult(queryResults);\r\n\t\t}\r\n\t}, [serverResponse]);\r\n/*\r\n\tuseEffect(() =>{\r\n\t\tfirebase.auth().onAuthStateChanged((user) =>{\r\n\r\n\t\t\t// console.log(user)\r\n\t\t\tconst response=firebase.firestore().collection('downloads').doc('transcoreIncidents').collection(user.uid);\r\n\t\t\tresponse.get().then(snapshot=>{\r\n\t\t\t\t// console.log(snapshot)\r\n\t\t\t\tsnapshot.forEach((doc) =>{\r\n\t\t\t\t\t// console.log(doc.data())\r\n\t\t\t\t\tsetBlogs([...blogs,doc.data()])\r\n\t\t\t\t})\r\n\t\t\t})\r\n\r\n\t\t})\r\n\t\t// console.log(blogs)\r\n\r\n\t},[])*/\r\n\tuseEffect(() =>{\r\n\t\tfirebase.auth().onAuthStateChanged((user) =>{\r\n\r\n\t\t\t// console.log(user)\r\n\t\t\tconst response=firebase.firestore().collection('downloads').doc('transcoreIncidents').collection(user.uid);\r\n\t\t\tresponse.get().then(snapshot=>{\r\n\t\t\t\t// console.log(snapshot)\r\n\t\t\t\tsnapshot.forEach((doc) =>{\r\n\t\t\t\t\t// console.log(doc.data())\r\n\t\t\t\t\tsetBlogs([...blogs,doc.data()])\r\n\t\t\t\t})\r\n\t\t\t})\r\n\r\n\t\t})\r\n\t\t// console.log(blogs)\r\n\r\n\t},[])\r\n\r\n\r\n\tconst onSubmit = () => {\r\n\t\tif (![majorAccident, minorAccident, construction, carStopped, jam, roadClosed].includes(true)) {\r\n\t\t  alert('Please select atleast one field');\r\n\t\t  return;\r\n\t\t}\r\n\t\tif (filename.trim().length === 0) {\r\n\t\t  alert('Please enter file name.');\r\n\t\t  return;\r\n\t\t}\r\n\t\tsetLoading(true);\r\n\t\tvar results = [...queryResults, {\r\n\t\t\tstatus: 'progress',\r\n\t\t\tquerySubmitTime: new Date().toISOString(),\r\n\t\t\tqueryResponseTime: 0,\r\n\t\t\turl: '',\r\n\t\t}];\r\n\t\tsetQueryResult(results);\r\n\t\tlet starttime = new Date()\r\n\t\tfetch(\r\n\t\t  `http://127.0.0.1:8000/waze/incident/StartDate/${start_date}/EndDate/${end_date}/MajorAccident/${majorAccident}/MinorAccident/${minorAccident}/Construction/${construction}/CarStopped/${carStopped}/Jam/${jam}/RoadClosed/${roadClosed}/FileName/${filename}`)\r\n\t\t.then(res => {\r\n\t\t  return res.json();\r\n\t\t }).then(response => {\r\n\t\t   setLoading(false);\r\n\t\t   setServerResponse({\r\n\t\t\tresult: response,\r\n\t\t\tstatus: 'completed'\r\n\t\t   });\r\n\t\t//    window.open(results);\r\n\t\t\tlet uuid = firebase.auth().currentUser.uid\r\n\t\t\tlet unixTime = new Date().getTime().toString()\r\n\r\n\t\t\t\r\n\t\t\t\r\n\t\t })\r\n\t\t .catch(err => {\r\n\t\t\tconsole.log('error!!!!!!!');\r\n\t\t\tconsole.log(err);\r\n\t\t});\r\n\t}\r\n\t\r\n\tconst download = url => {\r\n\t\twindow.open(url);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<SimpleHeader name=\"Form elements\" parentName=\"Forms\" />\r\n\r\n\t\t\t<Container className=\"mt--6\" fluid>\r\n\t\t\t\t<form className=\"cus_container\">\r\n\t\t\t\t\t<div className=\"heading waze_incidents_clr\">\r\n\t\t\t\t\t\tQuery WazeIncident Database\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"timing\">\r\n\r\n\t\t\t\t\t\t<div className=\"dates\">\r\n\t\t\t\t\t\t\t<span>Start Date &amp; Time</span>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tid=\"datetime\"\r\n\t\t\t\t\t\t\t\ttype=\"datetime-local\"\r\n\t\t\t\t\t\t\t\tdefaultValue={start_date}\r\n\t\t\t\t\t\t\t\tInputProps={{ disableUnderline: true }}\r\n\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\tsetStartDate(e.target.value);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"dates\">\r\n\t\t\t\t\t\t\t<span>End Date &amp; Time</span>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tid=\"datetime-local\"\r\n\t\t\t\t\t\t\t\ttype=\"datetime-local\"\r\n\t\t\t\t\t\t\t\tdefaultValue={end_date}\r\n\t\t\t\t\t\t\t\tInputProps={{ disableUnderline: true }}\r\n\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\tsetEndDate(e.target.value);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"checkboxes\">\r\n\t\t\t\t\t\t<p>Data Attributes</p>\r\n\t\t\t\t\t\t<FormGroup className=\"checkbox-group\">\r\n\t\t\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\t\tname=\"major-accidents\"\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setMajorAccident(e.target.checked)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tlabel=\"Major Accidents\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\t\tname=\"minor-accidents\"\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setMinorAccident(e.target.checked)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tlabel=\"Minor Accidents\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\t\tname=\"construction\"\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setConstruction(e.target.checked)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tlabel=\"Construction\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\t\tname=\"car-stopped\"\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setCarStopped(e.target.checked)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tlabel=\"Car Stopped\"\r\n\t\t\t\t\t\t\t/>\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</FormGroup>\r\n\r\n\t\t\t\t\t\t<FormGroup className=\"checkbox-group w-50\">\r\n\t\t\t\t\t\t\t<FormControlLabel \r\n\t\t\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\t\tname=\"jam\"\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setJam(e.target.checked)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t} \r\n\t\t\t\t\t\t\t\tlabel=\"Jam\" \r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<FormControlLabel \r\n\t\t\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\t\tname=\"road-closed\"\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setRoadClosed(e.target.checked)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t} \r\n\t\t\t\t\t\t\t\tlabel=\"Road Closed\" \r\n\t\t\t\t\t\t\t/>\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</FormGroup>\t\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"file-name\">\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tid=\"file-name\"\r\n\t\t\t\t\t\t\tlabel=\"File Name\"\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tdefaultValue={filename}\r\n\t\t\t\t\t\t\tInputLabelProps={{\r\n\t\t\t\t\t\t\t\tshrink: true,\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tonChange={(e) => setFileName(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"button\">\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tclassName=\"waze_incidents_clr\"\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tdisabled={loading}\r\n\t\t\t\t\t\t\tonClick={onSubmit}>SUBMIT QUERY</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</Container>\r\n\r\n\t\t\t<Container className=\"mt--10\" fluid>\r\n\r\n                <Card>\r\n                  <CardHeader className=\"border-0\">\r\n                    <h3 className=\"mb-0\">Query Results</h3>\r\n                  </CardHeader>\r\n                  <Table className=\"align-items-center table-flush\" responsive>\r\n                    <thead className=\"thead-light\">\r\n                      <tr>\r\n                        <th scope=\"col\" style={{backgroundColor: '#172b4d', color: '#fff'}}>\r\n                          Status\r\n                        </th>\r\n                        <th scope=\"col\" style={{backgroundColor: '#172b4d', color: '#fff'}}>\r\n                          Downloads and Reports\r\n                        </th>\r\n                        <th scope=\"col\" style={{backgroundColor: '#172b4d', color: '#fff'}}>\r\n                          Query Date\r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody className=\"list\">\r\n\t\t\t\t\t\t{queryResults.length ? (\r\n\t\t\t\t\t\t\tqueryResults.map((result, index) => {\r\n\t\t\t\t\t\t\t\treturn <tr key={index}>\r\n\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t<div className=\"button\">\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"waze_incidents_clr\"\r\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={\r\n\t\t\t\t\t\t\t\t\t\t\t\tresult.status === 'progress' ? true : false\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => download(result.url)}>\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tresult.status === 'progress' ? 'Downloading' : 'Download Ready'\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td className=\"budget\">\r\n\t\t\t\t\t\t\t\t\tQuery returned in {\r\n\t\t\t\t\t\t\t\t\tresult.queryResponseTime > 60 ? result.queryResponseTime / 60 :  result.queryResponseTime} seconds\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t{ \r\n\t\t\t\t\t\t\t\t\t\tmoment(result.querySubmitTime).format(\r\n\t\t\t\t\t\t\t\t\t\t\t'MMM DD, YYYY hh:mm A')\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<td colSpan=\"3\" style={{textAlign: 'center', fontSize: 20}}>\r\n\t\t\t\t\t\t\t\t\tData not found.\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t)}\r\n                    </tbody>\r\n                  </Table>\r\n                </Card>\r\n\t\t\t</Container>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default WazeIncidents;\r\n"]},"metadata":{},"sourceType":"module"}